<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta
        name="keywords"
        content="Spring,invokeBeanFactoryPostProcessor,lihuibin,lhb,Java,hexo+github,spring,springboot,springcloud,nacos,jvm,mysql,k8s,docker,gateway,springcloudAlibaba"
      />
       
      <meta name="description" content="学习，生活分享" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Spring-IOC原理之invokeBeanFactoryPostProcessor详解 |  不忘初心</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="不忘初心" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Spring-IOC原理之invokeBeanFactoryPostProcessor详解"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Spring-IOC原理之invokeBeanFactoryPostProcessor详解
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/archives/e74be873/" class="article-date">
  <time datetime="2021-08-25T09:48:36.000Z" itemprop="datePublished">2021-08-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring%E6%BA%90%E7%A0%81/">Spring源码</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">16 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在前几篇的<code>Spring-IOC</code>原理系列博文中已经介绍了一下<code>Spring-IOC</code>大致流程。也大致了解了其中的流程，这次我们就来详细解读一下<code>refresh()</code>方法中的<code>invokeBeanFactoryPostProcessors()</code>方法。该方法会实例化和调用所有的<code>BeanFactoryPostProcessor</code>(包括其子类<code>BeanDefinitionRegistryPostProcess</code>)，所以该方法是很重要的。<a target="_blank" rel="noopener" href="https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=IOC%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B.drawio#R7F1Zc6rKFv4t9yFVOadqW8zDIzhkTkzM%2FHIKFZXEKYBG8%2BtvDzQC3SgmoMbt3vveo4DQdK9e8%2FrWkVgezE5ca9y7GrXt%2FpHAtWdHYuVIEBRRl8B%2F4JE5PiJqko6PdF2njY%2FxiwMN58sODnLB0YnTtr3Yhf5o1PedcfxgazQc2i0%2Fdsxy3dFn%2FLLOqB9%2F6tjq2tSBRsvq00efnLbfw0c1QV0cP7Wdbo88mVeC92tarfeuO5oMg%2BcdCWKFg3%2Fx6YFF7hUc8HpWe%2FQZOSRWj8SyOxr5%2BNNgVrb7cHLJtNXvW6dPD7MH606o3jvK%2FWl3PPyDb1Zb5yfhG7r20P%2F%2Brc8%2FX3ri08vl1%2Bir%2F2DOLX4y%2ByNIwc2nVn9ik3lQ%2BuAxZmcEngbXrT9y0RnlYwLf1QQTxaE%2F0UNKF%2F23qh2ZtSNdP6oqR7p2ZNSOqtKRqR1pHDpSOTL4o6p8pIEjCjoioWtqR2b5SCvDUyaHTulHGrisclRVj0zwqyr8oBtHmtTqW54Hf2qKR4aGbqaAn5q2NYRfwJXgMvhQcAew0hx5HTAz%2BI3wSMujYcfpTlzLd0bDMrxnfeT5dXfUsj0PvDBecn9OyAys%2Fhh%2B9Jxht28bkHDBXT57jm83xlYLnvoEOwwc6%2FmDPvjGg4%2BIvglVciVRjv9RySXBruJKnKJxsUuCdQguAG%2BDv5fDRRFrNbQUoun57ujdjpwJFomcIeMAhGt2Xavt2Iv7DEdDcH9zaru%2BA7aW0Xe6Q3B44LTbcALMjtPvx%2B5cA3%2Fg6IML%2B3YHz3EmQiU0B55mzyK7OCDcE3s0sH13Di4Jzv4RlGATzgnzkWR84HOx53lEkvBgL7Lh9eCYFfCZbnj3xWYBH4L9ssbe4WUxde%2BMXTtGPmSfLHjOn2BfGYhERaEJ%2Fx6hBV5suuCkpTfVlhKehATwp2MNnP6cXKJYA0h6wVPebL%2FpWs7Qg2xsNBwlz8fv5CHagvfRS9rYZ2zq4KW8MdhirLeKj7bVUjVRoG8znjT7TgvO1wjMa2xj4jt%2F62mdTktR2vTTXLvreL7tpjzluGJ3bNe122eD8cj1G3YfyKaRewqkD%2FwN146d%2Fgc%2BSw2H1nQXg%2BXwP8RBwnnGTxRrkbf84eTZM98etr30aTsBVDUOB0AG18VHOfTExEuVurYff%2FvjfxbH0P2O%2F8lp%2BJF1jU5eHgSQ%2BkiyNCmPYRMAem3A4snc4Y94%2BnIamN9zvJQxldZ8hK6pimXRjyBDT31OazQYT3z7rGM0PcCrj5dQNv3vmFDV%2F3Kdl%2BEE8dw0qkC7aUHPBmuT5kQ45S3SKv2P%2BeB3G4rHP9SGz2st7M%2Fv7pzjlmtbvo35x5rDaYqa3pJT6DllNP%2F8s8dMimzkktVuHxdE7lt86w2wwhal59upjwQs8ZiWkbSlgOXkle1bbcu38hOSv4HxZJufrRCnWomcQRo4uT5hywGrAx5fYbxF7C5eOKLsrtC6KsroESSZjxk9msRRNo%2Bs6rTJw6t52Dysl9AYFk9icu12124EXwGF9Ebd0dDqVxdHzcXRy9FoHMw2sFn8eTDd1sQfxdeCtmDXm3VvNHFb9pLrgvfwLRdQ9JLrAq8SfMmla%2BjafbAfpnEfVe7LIaQaoM3kZgm8OfRGTNiAgjye0fvQtTuu7fUWrC7hTYkcbqZuuxX7jV7jhNdB12s1XS9wx%2F3RtZIqx%2FbcH01lbDpOKMmMbacpBa0z8bXu375TM%2B47faf2nfpNp2mrFXeart6OvMDajtQuB2ac71ot3xiP%2B04LS2JwIyjnmDszZROLtLB1hlNAAdC7WrOgmj%2BPuUm91Rp%2BurcKPE%2BUjpa4q8gFR8v9VcFJtm%2FN7TaPBVlGzy0j%2Fhb7%2FE%2F65C5bSgX9oX%2FbXMzTak6Zrs8Flk3qtTkz1lotcOcWxVgJ%2FyLeW5nmqYLG4KhyUXoML%2B8rQ9UzMlRe2imOqufEUVP4Y4xp3SHXMLZXKnbf7lq%2BvSk2ufhFjFWUwWKl%2FxiaU798ywsM22XDW56OdC6fdIbhWVWONBMGOHEI0%2BRQwLJypIvoiI4CluCIAeOaMGApoRAljoAa5AO6jw5upTbTno5uV4MRVBgIVeFn%2FGOjEgZC0TUcDJz%2BOuIQ9QR1iHQ0L6SEKHUohVEHy5RKCoRhO4j7VlAQ2mmhybRcnz68dLrtmeM%2FB2fh55cjGPuVg28VOEkc%2BTInX4bgNZ%2BjXyK%2Fgl8XP0PfyO%2B2JV74jOIlZlals4PMUih4Qn3kILFBCC7BjiQuQUj4xYNfLWiJvlEiEC0m%2BRWeGepGiCjD1%2F6Bxb%2B3liCf1RTkd8sWlBiqZNbsFHAEcEKtGslyAddIiLmr6JSCrtHhvVjLfGk17X58oUhKRgssiw0YenpSh2sDU8pqovtBVjGGRIumRzaP5Er2JQ6JMikAwqyv4ClH0cwplmDgSrwk%2FmzHE8eNkNiYo07HswvZk5K0ek8GEawfidO1ZzPB9ESR1sFCxhhluuEP8xez9FR1liRbTQb9mmsN7NXO%2Buw6DTx%2BA%2B7j%2BHBa%2BHVc%2BOFCr1Z0tjjFCjXFOBcG6JhhdhvOszN5Vpoe1jMNyLIqdscZOtBOuiO3iCXJLfL20E9xAh%2FQ6k2FMDvE2gCDM%2FGNDcTRko9alYsH1e7qkSEHWrEhUgSzaY13DUqYxRWZUAGhtmKYaLoZhZf2YdJkwrJ0x4ulYZPIMbnP9q3W9ZdJii8Tz2CZ4TWbWadfF3Ijk75a41Oyany7FXWTaA67G%2FL%2BjyxnkPgkqhwlX2APlQRR43Q5%2BP%2BiqJnl59s2k1BS5n%2B5VM80jVJB8yjQzqwVQrT0Zk2t3Oe6LBrmOm6G7841g%2BOKQkkpaoeLtJUN1NRj6K67huooSUBsWcO207Z8Gx71aHlXgB4bzjiZHyCj4C3IzIjFrAapF5JLIi%2FzgqrIuqxK8Vg5WJOSIkb%2F0rJT1EuiwqucgO%2Bh0OvKS3qJ0xd%2FC1tjWrDSW%2BjBd%2FoeUw1q9ezWO%2F2DMqEItvfY4KA3F2jLBlaJgdlvAvMeuwcCVbwG82CZ9S9AXzfDEhst%2FMEloKjF6V%2B0xYOzOl8C67z4o8apStNKJLEiWuyha4BMaPKR5VJhJEOEVYRkxpi%2FYkKI68NegYpw8YuixTUJVsSWZddKRenBAl1s0%2FBdmJ6PnVVJZnxEsvbJIpSCaM9igdB17DiPhmxWlYRhlEjAR0FxHlzOBmxfvbnUtYfiQUblCBD1wlhGZW9mNTCWoV2rwlM4igQv1hbRnl9POUwTikU6hUX%2BhAz%2BuR0zoYJJX522GLzJShOKbJ%2BVJlT%2BcnaPZ1%2FMOPtkCxQ6%2B5XPpvvB6e9fb3PPfPNeHj9t8w8rXLTVEsW8kr6SKR9X1qL6Db1fIB1yTM1PS4m%2Fab7BwvZkKQ6uPAjl0CAoF4ByyBgORz5SGg0fDLM58e0MmXSJWplmUxZ0eqgxnTSn4oq0aWkFVY%2FMZ4D3hBJ2S8UA%2BTzS6aQv%2B3G4wButgyNkRnZL4iv3P3M06gOd5LsFNLFdh38Dr3B8C1XvJkdbMy4b1TQSsD8mVt8LJgoSxLpErliaKjOIfHEEKOCzOdTrrmwgIWCFbOTa1HqxFdW8645S0FWcVrrW1IGB%2Ffvv0pUuYBCZGXQLSD8H1UKjYkCKO9PQDwS7YZOvw0rA3Z%2F5TNoUJPNrmzNcvrmunZ083Bn3ZzfX%2F5UvjUbjP%2BP%2B%2Fu7MfLhPYwS%2FcOpNHgUvFWjqGSrLd4MsNNPY6mJ0kKzYjzlXYJILhoeBdnJtqxMbqcX87fOKCTaaY4QC%2FjicniTzMCFJQh4JzHwqKOWVpLNulfmcXDrNfVkYCbprDTGW6gXdTpj1C2hh0F4ATAZnDJt6kFqmywt3UkEq8dbnZ3Ut8mZobp9UtAg6FxBnpsriDuHOl6G8g7QXZvCEmec4biEisqxCP%2BjiGg3yFMjGaxEOogWhDHB%2FeAp5UjUxkiKP0h7xQ8EpHSUmGeVAHABuBSk%2FvHM4DPR0%2BAF5ZA2OjLmCTqFbLbyuOnyiWSFJREbsTYNcJeSW1dAGBD%2FRGblKrPFE0Mt0gWRBVdAmDW9ISbdqBBcNr0XqRm4708wUt7REDjmP%2F3jYewxPD0fuwOoXs%2Fk2VviX%2Ba3gTv4X%2BtOWvxE4zJjxLakhyxehiQMaJc%2F2Q0%2FSujb2Nw3%2FDdgB3%2FLGbe%2Ftaw%2BXlymD2jIeBn3tT%2BHI%2Bh70Hu%2Bge0wtw38ZnpZ1pR0vHuVPBviTr038vAc306bsmS3rhweHyA45RPpO6s78dXNOq4yRdPvAgk9TK022kg1U9liJKq340nZmqCWj%2B%2Bg1RAMaNFkXWntUOY7fcMuWW6jrbck8Pih0v1ihuzxLffE9VehSn5yjGpM2BNf2Jy68QceCg%2FnexGRDfqOyRBI42NGcqeBQAuk6taiSlZ%2BVMe9kfbwqXkqU%2BMkiX9IEKt9KFVglaCQrJf8CiQ1l%2BJA6elIsn6WOnlGNvyjrD9YaHKk58JXRL9qW17PbwSPXW8qVGUQkCTmaQbQsjye%2FChh2efsfJVHfrkhKSSNoOT%2BucX%2FwbJdky3B9XLu8SAjrO8N3%2FL3n%2B7B7hIHkd23q2J%2B2W2o7Vte1Bl5pCMt4wTNr4aw1%2Bxb4KdGpeoDG%2BwGdQ4zGTic8ZbcdePS%2F%2BA%2F61tx2PbTC5NDQmsa%2B%2B46PaPfsBryTDNQcQdbA8GSgA4OvYBVlYIsE%2Fwf0I%2FAJXcLDryq8Dl6imaW2a306I8AF79Q7ftySPUm%2F7HimYDW%2BvPvKy72pmVedm1fnRR8PBoJq2TdvJ09Nc3T13DpTdd3yhs7jzbw7u%2B402tfCybhSBa8hC7Xbm%2BnDdd0ZXHLyp%2FZcfnSv6t7r22n5Q7kZyrdvp9c1Xnx%2B5Frv9YvT%2Fvv564d%2F8jF7H3Tv3p77L0%2FPRgfd5eVRGWn%2Bef%2Fq6nXsPlWfZkL16fLmo9bpzWrClf7x2uidS1Nf8bj3Fj%2F026Py%2B1P5Q9ZrZx99UbqeXQ9u%2Br4vQQqT4dKB%2Fzv5fG486crstfIxeR2pn7Mh967cwlNmXZr2z98rZuNtqN3NZmN1UBG5ljF9nU8NdAfzXtAnp%2FWbzoBH93qVb9SPu9kXOlebf9VPLiu987H28MD1Pvsn3PP1RWdyevvxfIqffTG6aEnPref7vnEKOOOzd3uPfnpz7tW4gWV4zsU1OuBcX3INeTZ4li9fZsK7da65xuP13JS6X92GOOnaJy66bmw%2F9mrn4lvjzqhpN%2F3nuiE2Lk%2F7XudENO8U6fzlZt6Teu7Fy0VP6rSeJ9x8fOrdvWtvanuGbjAau9r8Qxx%2FzrxZ%2B3H0wl%2F0Dac7L0%2B01l33%2Fk1xxkJfU84eawPu7eEKvcT5%2FGHiNs8eempj%2BGjdvj30p4I4ejjl3r8aNfH9hZue3H7NxVoLPaBiXs3uT%2BXzeaNuN707uTcwXvS74Xm1czruo%2Ft1at7n2aDaa87OT09eW5Z76%2FlCpd67urpRh58Pr9O%2B1D3l3InzUm54%2FXeholT9jvlRfbnXbsp3F70L4Wo%2BsB30tGfxrvFx12%2BeaRPOPrEfW6Op9mCdvPW7XycnnerN%2BQw90%2Fw46z6%2Fqt3L0yttdnZvjt99GyxSU1IGpzO8tH6jOn2YXMr%2B47hd6fZeepfosHprPD%2BfSbZtXk27p5X258OFdF97xSd77vCk8WWb49MLc%2F4wfpQal8rVzPxwjA%2F18vrx7nN6U8bPl%2BYzVT65q87n80lVGnevn4faw7Mol1uG8jqVFXQ7r2x6audU8b3noXH3rr699XqNM%2FQoszV9f%2BvKdUF2Hqzm7KpzOR%2BcPuJfXcl3V9r9WOqUq%2Bbrhdx%2FMxqnr6Ygf%2BBNcPOk2PPzhuwO5Bu95788a5J55nev7%2BZvnx%2BN3nt5fGf17XHFfZOv77uvTvPy9b4yenq64ztu%2F%2FpkgG5SPX259tSXW925vRw1%2BNfyBd92X%2BqAbZ%2Fjp5RnU39wL4v9k9m0PJjXT67F18Hb46Aj%2BVeXvtA6UevD1%2BqjImoPd%2Fr0TvvUTd2pP4t2Qx5Nns%2BflOG7ZD0NJFEH06I%2BNc%2Bqp1Z3%2FtTvnmuvM2t6P%2FNOn2aW%2FPw%2BuWtJ8oVcaZwP1at6761rtQZv1kP75O0cML9W5XzqOebVDRqUhAjYVG3H0Men3H33ZfT5VdEGTu31pmlflGv1B9FxpuPP62lP%2F%2FrSZ19K7%2FpDql6Xy8%2FP9ufl5KvW8VsXtVO5y3mtOrrZuTZw766lx7On1sXYHr0Lmtj5%2BHi%2Bd16mbyZ3YgqmYStzs8nNpvrZGxrG81ur3HgyGuiLIbRv%2FMfpo2u%2FPDgPt9e1iefcSqbYFe5Pe8ZYOGlWXxuYO02EHv%2FMnwws%2Fv2kPn04HSmSXbutVF%2FwncST0fvL7ePp%2B5lVvahwdv2y7JvOU3N2cvV%2B2XG6yoV21vpyLm6%2F3CdLrF5w3avLO9%2B5epRGUq%2FV%2B2o%2BNar65NHyLzTMz2655vNA8DtijW%2B0B486nsTbhuG9dieti6%2B6dXqHWF%2BNm%2FT4h17l46M9BtQ%2B%2FvLUq8%2Bbp17IdM0bQ1I%2Fbq6kR%2Bf65mVqCdX58NWbNq99271X%2FJZ0MX1ym3fdjn3%2FPHg4nZRPa62HcxO%2F1s3oaoSFwUWjVrbbZmcm9Z%2Fk3q1abZp8xxv0evpo4N52Ze7Mu%2Fo4eT45uTf1rnVRnlXH08br88eDWuYF%2FlTTnsGOO7uZXt1xnZcT3j6zPm4NdVQfozE22qP%2BSeeu8nL9JvPdk1G75z1cCXOjVeabH%2FcXvapqVJyRcOm41ol4OxSuLm4r18Lpw%2Bnbw9lpxb1qq4%2BtB216wonz0cfsDN3TP%2B2c4Gl4cR%2BufPezdz2o3896yqsIxIzD%2Be81U206Tnf6PtG0qXAJqHzkTE4GzYFl8h%2FWq9F6A6RaG2m3L63KyyUQVWXu1RkFrPVEUl11cK58Nowz3jytKKZ7h57GfymS3rPfHkz%2Fo%2FNVexxd3p623p4718a99XHasMr26Yv9aBrNl5fGSXWuv79NzdnEerwY6rzePTNO5mj8NUd6vHq7OEef6x%2BXJ%2Fc9vODOuWOrwntdEYft67H%2B3m6XX40P37XvzS4amz7uf35WJNG9v%2FR7T2WOP%2BspV63H6nWnenJzfaE8%2B3xDRbdq80%2FufFQdOi91v41%2BO32eDOfVG6BpS86p3DIaY336cMO9ifO2WBteDNVO%2F%2FKkfyM%2B3gqVmY1%2B0rzS2vywNuvNuv6nXr26u5eeusKL1OmI7vjpq%2FOCRZf7amu3c%2BHqzp2%2FVdWB3Ze9vt%2B7kJ8E7kV6%2BJp8jJ1pvVVzxYF4MvY5Ra5fSC%2B%2BI508cHZfbJ%2BbL%2BhpboPvz2%2FeP98671gtePnA2oFd%2FZxf3DdGn%2Fc%2BOmCoTzcvptzuX3VeDTSCZs9Whx%2BKd8Z5r9WrT1V8ejuvTy%2Fkt%2BdZ7Z5r6%2BNae3j%2FOlEHZ1%2FK2cPwvmIPT%2B9HrSune%2FZ615nYhm4IsmqUn7EYmSnDZ6H1dVVvvV8MhOFNfVC3JoNG%2FaqlS%2B83D29a%2BeNJ94zX0d1QfLmovgAC7E8vWj3%2Fpnp9f%2F%2FsfgE17KxaRkNDmkfNeqnPv%2B6u6m%2BqPnUxs598IaIyyx2l83Y9f6288%2FfW%2BNq5PZnZ5VrDGV73rfNG5bHdcj74Sf1hLD0OuIfH%2B%2Buh9ea%2FuhfWi%2FDl39tvJ6en5Wvv%2FqJ1bU1H%2FGl13n9znecxJ83kq9r84u39pnz%2B2b95lS8%2By%2BN%2B9XxYf259fs2em%2B8fN8P3u%2FLoenxXk%2FWuo32evfFGwy6%2FcTcPj5pgaGPHmr%2FV7viXgdTW1bng3dofDv85uZHtviqNPl%2BG3blzozoC%2FzRTpo36iO98nZ8L1ZfrM12R%2Bbv78zOlBUR76%2F6aexSFadv2K3zn0Zopqgru9z6anVQG9489IPgHVvXr%2FfSsLTmj7qN5LVtX4qnybN9%2FNBSszPlXb5ihzG5lx64L6PP7401z3p%2BL1lXjpn0iNzqX92rrEesi71%2FV4fBG0p74y8HTO98dc42L1%2FqrU5ncX733nz5vJs%2FeQL68uPdfRlg9vOoNm5hJY6IS7sSLu9mrNsC69407e8Dq4Vur%2Bm6NT7sn7wOvI7dm%2Ffv7d5GTxpqna%2BfdycQYzxylXJcw%2FTpX%2Ffajcv58flJvax8XXs2sy0DXvEOka8rvnHddC2SAVx9d%2BR%2FX1d5d9cIatGZ81bu%2BeKu8TKrV7s0dp1Yfnypv7U7tTWp0W77J1fvtV%2B799r5Tfx13vYeG1W4OpeZUF2aVmlJ17bF%2BfTa4m95%2BWvXHZ8nGLPPVxSrNJd7kt60PoF053Jdz2rDPrt4eT05uRne6WHYuroTx9cR8f5UHzqvUuXv%2FVE5u7pzr%2B7bW6PFvr5%2BPo7nkzZ84LEhvJX6EWei88omeMLp%2Fx3LqXmzXeqejFzyPQKx8iZfPD6%2F3Neseb4%2FbroZF2tVnf%2FrxLnPyk%2F7ofj5Zsl%2B5s%2FkmOqfdGMr5iz9%2FmI3Utgc0wIYpqmZ%2FVD15PKlN396sEeB%2F9ce3mjF965zful%2Bzit91qsKrWD0XvuTbT%2FtxMG%2FcXAD5alTrgwvnrAXsH4v3Hi46xpviNvA6XzQGU0wAzfOGwknX72ODv7v7bAoS2GONid4FUv4ZGA%2Bj2Vn5pX45vvBlp8o%2FDl7uX09kH1FQbXxdbZk2z09NWf%2B8eL27xIzKu6nb9q2K2Uyr6tX1Lxl9OenPWuKzzk%2F7srawquxxZ9LuPE%2F12VRUZdt%2B63QeHa7qzir8V0t4VPzhvTR6mUx611%2BNk8vb6askdodAE3Qe22%2B2bgqtm8rZ%2BMXqnGgVbNlcyrr6OBxMB5PW%2BFQTz56m0%2FIJlm1nyq1yUb780h4fr05Hbu%2Bk9qz1Bnwn4InoIkz%2Fwul8OnBmtmzce3MHG3k3Q%2F3sRVCwisObX2dPX5d3zvjqRb24qIgjt3nVubg%2FqX%2Fevp5Wx6%2Bdp1bPaknm4PnSaM%2B8h0tr9vIgmK%2FPs5enh5rX6bbOurf647X78PD2fH79cv%2F%2BOetU672Z2mrX%2Fdbpa%2BWx%2FIZsk1q3Ntft4blxih7dbfdl8%2BtTa16pTqMHVJyHk25b6ZXHQkN5bQ7mmPV23KvLj5vKs1O%2FHz%2FfXTr9RtOxL8bP9zdvWrf19XzV8AyweE83n7OK1aw13q865vPT5Oada1%2FeVKd3JzePr%2FPRxcODKdbmd%2FPaZIbm0BRbtnE95h4b9bNT58L2h0BV6g8q2u1J88wG2wlopxreEReeU77zlQEWoGgD1U47XWQ91j7dk7eW9IR3y%2FRyoDy9nYy60r1hT2xXUOXP00rv6ux5rPVuTmbPEX3Qtx3%2F0nqq%2BOdSY6hjEe4%2FuZb9%2BiXWW3PuUkTXDj7rQGBylXfHOHP0svV5LZ1%2FcU8NTxwMgLUkTa7nnj55rV3fn1rNJ69cva%2FKz69T56IzeO2dP15JX64hPfDCTPiYnrTuxG73XhA%2F%2FRf1%2FXSqNf2y%2FjKqT5ThZX%2BG%2BerotmnP5blgXVmTk%2Fcb0xvclo3yy6VZN7TZ%2BOTFdG55vAsUbmiMHiWjZ9pD4%2BV93rye9pULNOirLqCi685Z4%2FrlvT9vcu3au8NVXtHPHqVbPIXW%2FfVZpzZSr86mH43%2BXf2hOXYrXUuonzunraeR%2BGyN6jdAYR7e3Fxw%2FlfnVRbfhzWsH70r6kS5fB72zj7Pn%2B%2Frc%2F5jeDat2lPvzuzXHl5dTRbH%2Frh7%2FvWKRXr%2F%2Bfyhcdad3ioj6%2BvFuLr%2FPOuWe27Nv3lqNXz58hkz2eqJj%2FmuezbAK2oECyZE%2FKtMZ2DU9xf4YxmgE84AdU6NOkyTXmsfOlrDowhMsD7yUHE09KqNfH80QP4xcMIM6wIj1cQd9Adcgh5meGPc4RW6TS3ypQM4QptcAr7HnXut9lAsOShXZNi2XdiZDOZfWb4F%2FgOPexB%2B2fJbIyA6ajBuUIN%2Bwv%2B6o9J42GU6dH9Y8fyNthFxn6lEfKhRCBOBdsCTY2v438HXiA%2BV7ZK%2F8aatr%2FrV2eX7zbD730XLFa%2FcPzyrV%2BVGfPQs0NyFgz1vaFHmyzPKdNmTJOTtZc8aRlk27BiwKMoZ16oEdMBUCSxe9UgTIhjRawAYRJBFZJRPa4apHJkwAINsXAKO47G6%2BYaogDT0QTiuJAZCBGguuG9RmAiF413LYb8YElbhaBYBLqN5RB64ckzi2lZV%2Fob5wVIU0pUMIStowmb4QRYowK3gzuklEscMyFtlIs3yJRaFC0ko7vzmS6DmC6J4jccxDK8km9kIilfIcUIULw6GrVeheC0nizVRaTe%2BHDRQdmviwpe7SwKPeiU69wN2wIz0SyBwPhBegJkqggWLjnMXzUCYRWSTCgtHMFBtUPK2RDbp8EZaeHGB%2BDxLZNFPV59AnCaFERPbSd2gLGJAFge4WnYbrpqH2p%2FifZu22gpssKEZRDFKYi%2Blrm38QfFanhCa3UQ6VZgIiQt2UI6kRioqg7qqMBGSphgwhMriyYYU5FoalWWg7wt8ZnQfQ0G5n8KRYQaKnIEzcPkgLRQMQ1P3gSjZsFEbpUpWl7dfpCItXZmVNhPh1quNJmW3lCQGwizccQYqD9RQMXMlMJ1MIdjdWo1u2RAaNmm9GyJteLI3cVhStYvvrNdSwNl1UpeIuwylDjcsvITNlUuubbVR0jmaCpx6zgXwQ5jnRe07eO0x%2FN0%2FgQQNyhmXPGwJTqWIMOGFlFc10ZTh7kaoOhNyRyHgagGnJi2WUpDkM5mnFHZ8YqLgw5fMPM5150m19uLVV4HWp2mRYOptNs%2BN9BuGJQG43LGCEplXtSqOs%2BtOpyO0WlRyKzjTVpqKrBxRzYxhN0PUCSGR5vpDSyLdZZbsAKVqDItBZ2St8nkgTDI5x9ZgAr%2FF7xf9oEoyQgAOe0L94Uoct6otFPpWt10HzB3sEvPDXlHsCeUyipDM4ISbESECbajwTEoouPsOYgjBExMNyQWZ3sPlctCQPMVdHyQ3Z1QUhLTWCd%2Fo6cPxXKAkfDc9Od8mPuefLz3x6eXya%2FTVfzDnFj%2BZARrcVqOFrH3mY53mgsVExyK56plZCfsBBfvhWQwhZTG21%2FGBPR5aq2RTxyZYQkQvYLGImN0WLC1jIZdvgp%2F3ouBC9xLpyMXvEA9YSp8MtNRmsgRpeVtaXWe1pV2nC21Kz%2BjIOFK70A4z6MUeRb07H0QR1bjKqLFiKApDZSzMQ8DowrHDGmPOzJx411drd7nXLv1s0eioAKNWOsMuh62n47s8DWXiMyBGGG5ojvptdoF94K1GHkQYsEXYS4axgicsG6EoIquO8bSI7yLFtg7c7JmN6sBXcONCdwOjYduSUs74a%2F1Ks3lTPE8l%2FrtVPE8riueJGXjeVoKQaqLvgM7yKHCMqQr77uXPaugMDhSAjPuJ6DgkEM9bikKiXfOtKKSYnba3uCAsGy9HBW%2BlT3AN9S7LKJICaIlquLptI7MRStKT3Yz9FoLuL3KOIolADH%2F5tyXACipf7u1YYVyHPpPseyXVest%2FoxAhkNB7ZVoEsFpSSnJRu4jVxC87BITbbR5j2AgI%2BhH5hACzIqAdIdwfL4xnNJnH2ehCk9FhqEWTCRKOsaTHbfb9Ggck%2BZU6yuYJN9EfjtXztqgeUuw3YNj3UHEto9gWHcNnYiFp8VwADUbgjRAJlYsTmYFU%2BjB8Fl4cjTwRwFFDQSmcBDZV4uKdPJZF2ugH4Ngbj%2B4yGANeCJY2cvAMHHN9gmVaDvBONTnjrRot3K8O5h%2FgRIQaiqEuuYsKp03TD3vne0yfZ20eVltMtbDNk7nLvWh2Xavt2LGpDCsFCnIbrW0v8ErCYFAYBoPM0k81vbA5Zvgm1lSHkgrPBhWb7M22tzjDrDqI76jaXMCHFsd4liYeGheroZp5hanlZGwwmW5C%2FFC%2F%2Fr4GnUpQCQoURV1fJ7ssR0JTpZKqCQqnKbqsyGF%2BWf5kR4eUN9RQOHt0MSufWMbc02HRwm7FMQ%2BDsI6HIfuyz8LV5cRIY1k9LlIZ8YOwYfpmUqIlhkK6kQBCVqooMhWRrOfq8q0geWB1uUawwDsSaRDptOZDh%2Bn1CjRzYgSh9ky2PiPlveCG0ksJNloSgRY8XGSc%2Bo7TNuPS%2F3TUh9magUPuSCgTYRIUROQq5TclJoqjAF4oKXyMCARWhrnMlVhN6Ysrw6N5BEUBHmDwx0vqHkgRJyxsUFm2d9JDC0z5IE4XcIeIu1aHtQSmEWBE48RorQqDe%2BGRA2nFSYtTSiS%2FbZ5QI2JhOqCNMAquCvN2SVnqF1jyPZe1i%2BanHkWyUxepqOzE1DWXaaVOIGUtT4iZCgwxEBz7IcCqkKiUFJO6JdaGKGxV6kZSEnQg6fj5NkhrNuqStwUo8KtUV4mB78uezt1KkpHoQCnWQRgRE8v1gB6SEj2Ml2CuUDqTnnSqaIa%2BJsW%2FnfBU047vxRGsGSevuLODtT0Iu4SwU0ucEOc8zDw8trArTo9ixSQP7ChFGK6WmtpOsSOZ9pO0R0eqWSqVjtQK2JJ9%2B%2Fh%2FrYXG7HjVwdifH7NNoT1wovFH303TWXvHa3qJk%2BIbXmc4zljeVUq5yY8gGMEohgBJlzap2ShrZeBI7cx5QEhK%2FjS%2Fewzvcrwg9IOlz7L0ky0xMqaJyzkQK7OqgmfkAVbsju26dhtrGw27b8N021Owsn3bLQVBn1Sjn1VfDBUshbjuaoGec6CNpbTBhGHaMG1sq%2Br0V5Wd%2FUztkRnOguU7dUfqzniGe5Cuxk9JuIxaTdHMpqDlcCXoHxfgCUTATRCQyhq2UgPPPzPpZ9EvOowsVFAVfbzBchJqjmZ6ETSDUn9kJaALgmajSNSy4qYHvhfne4xUl8JKp1Ioe1voKvvJ95azs9WML7ObdEOhUxZ1YJaA2rsxsmmaYQr4n3i%2FOaEJ%2Fx6R3OL4SUtvqi3lKJZ4XGjP8qSpAFPowz5U8EDDd51hd52E6u82ViSduIKnk6Z%2BYd9m9DyO9DOGgGsBcAxguGFzSm%2Fd7pTNZlOGGeRLbaaUEZdymha0WdOeAd4ThlGh82ALPR7zeeQONuYmZEZ2S%2BIr9z9zNOoDob7uGn%2Bz32fNuGykNfcs2R8Tq%2B8FEwUJYl0iVyxNlRlEvjgCTLzZHCoxVzYQYW0vdi2z4%2BihoXgmBv2t3tbIiN5mX2Ckw%2B%2FNfKZBpR3atB%2FatKOndJCs2I85p1qwb7e%2FeHlf5hUTbBRWMex6T5N5iMEY%2BjEkBPVYoyAdtsN8Ti6d5r4sDEZCFGPeZwgegVm%2FgBYG7QWTWUOXjoC5H%2FOzUMY2qyElB7JPKlrowcTQyyqLO4Q7X4byDtJeiGkS9UOaqMcEDhGWI9dokKdANl6LcBAtiB6C%2B8NTFEwMjsTgh4JTOkIONcqBOIC1lXrkzuEw0NMD9FQOAdPiMSNcVx3dauG91eETMWYtxFIxYm8a1DxHykijbtVIqTNrPFGsayH4AN43KHTFN6SkW8yJjNYidSO3nWlmimN7SwKSQu7bPx7238LTw5E7sPrFbL7ifUDrvhXcyf%2BidklL3wj2TaJnfEtqyPJFCLLWS57th56kdW3sbxr%2BG7ADvuWN297b1x4uL1MGtRUXmFpJv%2FaH47D7HvQe76B7TC3DfxmelnWlHS%2BehZIsG0q%2BNvHzHtxMm7JntqwfHhwiO%2BQQ6TupO%2FPXzTmtMkbzt2tB3gFbrTTZSjZQ2XE7F4ioIrEUXyZWC9aS0X30EMufi2jtUeU4fsMtW26hrrcl8%2Fig0P1ihe7yLPXF91ShS31yjmpM2hBc25%2B48AYdCw7mexMDzoxhYkMKRodvz%2BBxqqo6iXYXyUYKDiUaeqTnljMypOh8lHxQTQVOiVfBSSqNaacKjHyksGY3%2F4yTLPD%2Fi3SfYHbblteDzY3RkuRTNzlz%2FOfgLvAzqpnEJZTg26JoEn6JNfNg1FryRyuagKzMr1qPAnJEcsiK%2F7%2Bhqk2JECMBEOCTGcFZ6zYXhZrhrZJVEimVm4D0rHnksqA7QPqgQ9ySEDhSWz605A%2FUAME%2F%2FV0EbdkPwAc86FwrTyVW7YcM1TaD%2BHyDxk1Um%2BMQnzSSabpQThWo95m1WNvH1GpFGSqbJnG06hLLsAg8yUhE36cpKAwTJeKXBQPRyEMM5MAGF2gMecqHebm1wNGAdVr8YtCnvLRZVxJtkLq%2FEN4fgYEIGFpECAxa%2BKCl85VSp5lMKI7XbaYVbv1SrMAN9dYCQjKOu6kumitG2KXEgt4kcjj%2F%2BkwaAGs74jVnkbcrAooj0JqE12vaN%2BUTRT1JKPncxFNCppIhp48s8QMyskKljZwB7z43HPZlVQNFsQtek6kKT14mzCEKkMRSyAsr6JaFDAxjDwq6f6RPE%2B6xGl4iK7vaUD03o6zp9y9uaIahDoxS1BIDhpkUXrLNloyMgpClSLT5EQybqfNKEpqNS2K%2FFgxkQzjYzjU04YUExI%2Bi0kxZZDFlgs2T%2F75NL8tZViYfyLDl2LbRavnjNLCZY9LPeIF2F8l4XFgrlWrNeLi8%2F6%2F6XL58aECzq3Z2eV%2B9ixZUF4uLu0QHzY6LC%2F8wmcBySs4s%2BxkwiCGA%2BGYIKoPXzfLGsExJrHScGTQGcFtE261ObdwdEXHjntVG7JqLmg1cBp8p6h9SH3nYG8Bo03iZuKA58v3RgLGO%2Fmh8xGj3mFhVjuM1rYKHjKzZwQyofeNeaeC1LLuEfjV2Hc8u%2BaNRfw1Cy59KiHeWIhKWJVNYuxEC21i0bkA8r8S9msXzuhl9IvTjRoa0RJFoTdxpaDXnrXFmxd2Tc%2B%2FgmqJAyAkpqWV0p%2BamP7AMlZhMXJnsCNYnhvyeJkXT2j0lkWuqAsxENThGIOo7IDnfAZXfbC%2FcXPhiboobVP81XoyrtUc%2FcvMU3%2FtWoTFqEORCi9LBbK80nvhBmtykjEtpyxEAhnSoWh1lV0C3toyyQFTkIEfdI40KApwmULUbU8aSLpdAK8iqoxXe9ZYXKa8XX9IE2hBguXMJUkD%2BMjkX1JqYoNo1az5vwalmFJzK1iBo2MOhHffspd5C53PWWqPrgpHxWVl%2FGqDKt7qeq2ocZ%2FyPsPO8fwewWJYu6s%2FU5zWzIra28XPvXpGiMYfZNsSvJGxYY6aNfraJ95tZCtlSP2YpkKNoifDMzxhKfDjknkL898VxGzVLptWv4zY5cw3CDFZyDTV3R%2F3P1IX03rBZrWF2t9cU7O9hG7nlrH5Ww9TtjQbNCXjtNTB%2Fl1LL96O7q0yNwkwKiYsLAJnRXJJntRQurKu8SgdhiPWJF7gKz1g%2B7Mkrer3RpN9uvDvjY9rMjNihELjnKqhqOmbHCWIRhnrP8uxS3bhrVP%2BLpVUzse0VmGUWFi4YEDDxZhghyOfn50jtbgReMchGC6uLMXRBOVIerMPbheUSGo96Gmso20xBuWUyRda%2FPDWqMFLnEn1UWWjA4mZJPUNCybcyodbkUkx391HE2Q2nJeLulsm3ZIh6oWev56bOWWISFpKfnr2Z1C1eSgOsXjd1i5eU%2BJ2kjKlbeWl2egY7cjuhdDHBBv4w8pvCcHssqlVYP2WiuOXT63dnVJTlhLFWx9ZNLwjtAW%2BP6mkpCiRLW4soHEDFwHuVfAPTDPlkcCnd%2FLyw9f2hV3vdjrxrrC9pvqeXoo1ZdS3bdpTFkqoXtf6MFOX1wmX7rpPltPZ0PgFzrQWlVJiZqjLMVMZaU4jm0TKG72%2Fmn2GMh5tz%2B8ya9FlOqB0MHZtnaVCiUBKLWmESIlt%2FhQHLH4NXnze22wBs55dZZKQjMpdZWOSX57%2FMf3MbQrKEq22jrN5EsmtW2kZEj5YKKwDQWK0v1mPRzCKyw%2F4l%2B5dV48Fk00Vl9mk7EHfc%2Fc1L9uTqzZu1h0Pxm5foc%2Btv3i03rtr5XSuwfPXMXcuX5KKkrp7Fh3nYuFnRDshu2YWN%2B221eUf65u78BuYZvZdSN3BRdRf6QW3OsIHJvly9gXdHbdazebEYGxhhMRy2bdq2zawtFyl397JuNvdtm1VhJntlF7YtKylqLxuebQqvcO%2FAY1dx8K3CQ1Jel%2F2Y9rBXxWYJ6W%2BZXrpjrA67PECgKwlCvQadrTX4bwEHuwvdpJqWZ9cBA7a6ewPbi7t1ke7isIdEooGwtshe2%2BbUO8NWf9K2ayi2ntbF8dfNfqIrzlZm1p7t48yqsJ4QZlxSQHvLAI03M%2BNrIT037EWz1n6mMaaqiLIgc6JFj4fV4DV9gpJ9YyMSykNTAYbCLW6Jk2gefKfvrW7ymXUGrXCctZF7Z49tC2eFpXQ5YE02l%2FgXyeFJphDvHGp0ejfd%2BGIwn7Vuq9UV7XQ3%2FFabeandQdE%2B2E3f60UKuL0QafilQNRSg49k4stHmhFBSzho%2BIVq%2BLgJgwKPQNRXeTcaNEaLifZ37jXYrs0UA4UeYhWHNScRzGGTg4pStEAF2GHwAzYDzAiAQ9iXjxTBbNUwgF2diuyd8a1u6%2F%2BL60Ulx6sOxv78%2BJ%2FoIqc0RV%2Btq%2Fwvp1eA1VY5CVTSyIISqIxaLvYDIwVeW9XFGNVh35yLNSn5rnpy1riv3v1nVo3rNB0k9z5daXPUgSuVSt9skyFuDaAJMCgbIcsbfO9VNA7%2BZao36B9337PRcIJWb4Gyx8FNwFn4jez2EYz2%2BD14S0o8c3%2BOkgbQ2HbBVA3AJx%2Fd3cMXOoOB3XbA%2FQBrL4gxpb9u2jwelMtClEu662rYMICuGyAuzq3rPX%2BF3hlvqhDoLKRBmGGS7rkVpB%2Bh5hEG7uXAb9stN7Zczz4ulUr%2F7MvqhIokmd5gwtHCabVYz7htznyq9gG%2FocMQgvZ4b9Yl1P0V6O2HXVSWdEAJTQdcwF4JmpOYWxczu90%2Bb7kgpny8Zqxbzemoj%2BCPE5oH1DSGdjt%2BbeiCzaJd%2FVDf2qpZERFfdcgqU%2B0KzEhbLHlXpBmRlYv8Aq9i%2BvsXo2iu1OPLPbv1vtC44e7hRp3FlgCf2rEdgY0ZawjTejoTF%2FwOfo8bAja2AuCPEckcwSL%2F1sT1nClS4nH%2F6KFtt%2BEDDir9pgdRqN5oiKRrGO5Ui3xdQaMvEzkuIzgtqcIxFKBIOBoKo%2F3zIsWBVn5wO1qDBOX1uH8u0XhMhqYH1HV15NHm0LMUhBsTDpUeD2qOpuPWaRX0gcoxOsjxTe2%2B77le2LoB1yMf8O3ZysFavpfgX%2FwW4ECzXcZsEod68YOhVItfiSXdjet0naHlO8Nu8vR%2BCb7g31KvcGzm0OTlNKAh6v6XFrVce8nDf5mXei%2FXMu3B7M7GRWvVSymLhirJOeOiBVUu%2BimQPByg16amXhAKylHh3oB5MQi09TvUeKZmtfyRO095ZiaXfF7EsVI1zlcPLTbx0AicQEY5CM2neYOg%2FmLCYD1Wf8APoYJWQ6qNRsD2VKiCaVKgsplKXC%2FDQX%2Bg7AjwEcUq66Sq5pesBN3CNqpAKlDzxJ5VXY73zaUi%2BssXwMA5pQZaY6Ti6rWck0uXLEkBDu%2BNrE2qR5vW%2B8OQfRiQSN9bBRuwxU3JGjw18SrYEYQFEtFhGO7cIp1CcQVqLx1A%2BehOyy9jnl0cBM8cw%2FIp8rNErZxvz9BarGgRFq1VDA4lejmnliey6ie%2F37gmH1BUMVHa%2BIeFKaCTNkox8L1kb6X86t9YuNHJysZN9IcmqKhh46%2BwZUBqE7DvAqDm3Yt6dWGklrEwMjOSyGYgUnUhTrDidxFS9SSYxoYBUnnuL6m7%2FxGZ8oTLrKRTnhMyEupm0O%2FDka%2FZIJXjdD1Ta7cyCw89IuyaDGkfhcOHmXU4sY6Jab4CYp%2Fp1U5mlKboqUDBTxJ6Zij%2BlegBul4uF9uFS5ETnENRSoJMSU1BlmkuCKi0VBSEFs%2F9JVA8P%2BIomZF4wg28MwyFAeeRXN7tQGrrYrzDoaDwzB3B6ifM80XuCIGaMhhGWeA1r05MTUdsJpi%2Bk0G%2F5gKjbTXzyg0iJRWk%2ByjssL3MECE3Rqj%2B4WIIa%2FSXXhDjejDem6cAVnfChCT9iViOOZAW%2Bc9U8km8EQ1LSIu0FEa%2BCRfK5wTpbYrOQmGapLOcoHjWIaPgbEL%2Fl0LaiZKZwDJYtcJoLIvB%2BrfLXZ7LLni13RK8%2FEGvynV9%2BV1TrGgoLZwo4R6RGDdyQ3PIL1y3%2FF480N3AF7PtqBCqBBhMFZRFREe0cNSED2IkRhkt4hg8hzjto%2FGY0KgiOUMS17DdqQNWp4rylTQ%2Bhk0fOXhne%2BOR56CwZezaIaCOfh%2B%2B73qCZnW3iahCsmlLbeF0InqpKpdIT92ouGD1S9bEklqcVvKXoB3%2FkKMImSVGViflpjgKA8INZ9Sj%2FRqPOi4CqxJ0nASBOR45V9ARvRLpio5KVkyOMKhgGws060kguJD9noDMIYcbrdHYbtfd0Wx%2BNWovWMmlNT8DXA68S6lU%2Bjl7yKpfRtnGxthDGNJYxRsKg%2F7j%2BYNTOANj4DM7hUkr211hDHy6Uzgfc3SphvJTe7Q9gjda3x7dcT4gi0k1QSlpjC5UTDWhQN8FId649%2Bo4hjcX%2BKwixzx6eX6%2Fp4qPearEIkPigpZowsgKiYuskLhYoFzYS7RfDzBwn%2F4ZOhz5Ye7iQ8osPrKiAucuPurnny898enl8mv01X8w5xY%2FmTE9TTyTDi6tpt2PryRJU2mBWYQNW9N3nWt7zlfg%2FIdrO4YxcPQusnkkV9agCnrlVpD3j2MRXEngRSm2f4MbfTfxgFwy6nRQTVliDddLBWAv6847mGIbNfD9RnfpWhwgY%2FZNmEmzSJ7BuTQctzKbBn5L9ibeBBdJWV4xby7CTmkR9GTTX1mI3yO%2FnJaUN6U1FjYl7yx%2FWrFBf8yf%2FnBhZHQnGNJy2o75L5AHEqd9a7hqUYYpx5ocKftHvk2zGropEBBAGaWH4GtCRygfywhHDpBkTVnS%2FABn2mFpSehD8aIK8V6EyvLSY0mztjDDTaVtGlaqnlRUqxmeZ7U22FlBl66R7oYXRM6sxqrbUmOXj7yw1DjiBUF%2BD2fYpblG3R1NnXbMJbIqYY7pEknjSQX6SIpiGCJPhUs0RnCdafoqfHFuEIHlM9tZpvFT7bhQjqFm5hj6jnEMRsAM1phVYc4pLvvTlYjWEWomYfxUR1qHEKgoAawDrv8L1I8SRv7D5W0w0kr0E2rTw%2BBL3orIDux%2FOZkSrwphDDSqM0gMBqAWyADEDM6vrSQ%2BilqCY4qqyJoxiTVjorhIGy5gw9CeIug7dsOejIHjmBzYR68xr8fzG9ksdQXNrZXfuIWFFmjfkePRzAktOKvAE%2FNMg5T1GpUA5kbDqf8oaL2w%2BOisf9q%2BkxGajB7AymAGm6wBDqtTFVgMrNH7OXNBwC4acD8mKXJWSFhw7LRqlkKWrGbKkeBoH0%2ByWUxiLX9eWrnaJ5RvcWVuCxgXD8D%2BZS2gzlg%2Fobj1kzajPYflk0eL4slFKSW7fHIHNe7lpLBa5yb8ebXOTTbWrujcAp2Lkuy3ddjoRBOUdnGny5vd6fxhp2fc6bkHhH5IKLSB9TMd0qwcVMXtqoq8xC5K3bCuuOt5zvvJXnYsG1pgZUMrqNSBR9XiqKSBRRc7GyZeQe75hInVXcpcSXljRukb9BZUCV5uDbWjPuiJoY81xqUFQWZxaZYXqTg1UWSnkO2EQZiaBXS0PANoH%2Fl%2F5vo6YceCNyIjgAeZhIEQGjWo1hk0Df7FTELZRS6xIc3tO8bkgUt8g0uQXbkzXIJR%2BhT2Y120mQxDvDpEf9UW1iTqKQjtVY%2B03KrEgEkDXExsYGqk8ZAUwMjqVYq8CwzY5mf1qaVkkhfT7uN1BhiRKBcYlxJZwBsH06%2FoTb1jniWRkem1l6ZfSO65mH4S%2BS2B5dx9S1BkZegE7UiG9udK6IQYvLSKPH%2BhdzDszhdiH2BQY4R3DDuxaAFMNXRBBvdJhirK8fYtWhDpXjQ4xk%2BIpzQbC3yfIDsoSaokSWI48m22UIgQmgSvwJ8RFvIqf2VcnnQ6HaHVovRgcKatNBVZoalYAX8QFW88%2BVgStXhARJL5EvHdRpMJmTWVhSmx0q6X0f2aVEIxK34sL0k7JpJYOeg4pIHwoRm4102r9Q4TzIbtP3EIbKEJ%2Fx4RYPP4SUtvqi0lPLka9RyQUNO1HNSbbDAajhjA59F7YU4C76SXtLGfnhe9kbZfu9abab86kdFNwYBchIIwNHCwOaNF%2BjXg1NdK5IgMS3N0ddEmbJtrhCGVFpB5uI2MMR6Dq8kB6APan5aqWTQcZNvC3DuCG7XNJVq9OId9vymCqZI2gxzyhyzpwRL2AMzyq1AVDrPhwzYhOHojb3VBYVen0rfA2OAv%2F4mM80ChBXWJrhzpYoSloZwPU4oQL5ZMhLIMI5UMoazSYeVFILRw2kdCwunkmnLEfEMP1Uizai3aUDPaLFOD%2FzAYuSbFoPmSuyHyK9h9s4rcjXqkosRgNIZnyOlIY2y4mYyYLRvkx9DvRX61TUL1KMigX06okCz1SLhpq2yhuDfdMG%2F5UaPWVWhVXJLzr%2FkOqY0xkQD51qCOcxrCBtoVunbX8fzUDoU5vQjqbLX9BlPM58WQ3FF%2FrdGoD1Z13UVULE2VddZAyJGJZwNSsSZ9P3Q4Ri5O6cD6u7pf2sOp446GA5QIWjhFbeKNSO3b5chqp0q6AhqxpUzb0aFBWQZHcgjWF%2FEiq%2BRYrK1AcbkQUhaUzk10KCN5D38gKpJ4FE19KClceMk6MEnfyb%2FI27lM8uMzxDuzIltspjuZJApxalWSRJi1PZmU7MwXFmdvqj%2BZxArgb9VPHjwl1U0ectwiveRp%2FH08aQaafS7CsdNpKUqbfkxmgNdYv%2B34xXehYsgldcRcRHcTa1npc8HSlvZdF61G1SeOoUwV2WF2zWc0m01ZYOm7Enc96fdRJkPqs%2B4SWhUXV7OW9EVPbe1qeB5QGPJrWz8c%2BfA90nZLIZsin5VZbYmkbvXBxIOUB94dblG4gEM8BxuyU4pzxa7cmxs1tlNXGnkw8qatbczqllbR6aRP7jElUpbwmSTHxmtiu%2FEb5Nf7e4tzlvaYpZ20PduPSKvjiKza4ykBLx2XXMeU3Nr8q6%2FbvTynAtjCjHkpUf%2BkEOM%2BYp6FJlO8rqE4Y17bTArYr8TD%2BG4%2FcypFsVbTvkNbq30FUmYUTCl3FEz0UzCp1jxyQZBrnO4jkBKoMFoAh5nqCkj%2BQA8qfxZkj8eQs%2F2fod1sYQX36xbWM7yeDBIsnL0l4OA0jlGJoTDZW2HcjVWBf%2FDibDEsl0xMZz%2FMarfzCjUujXYuUrzu5%2BNgUOs%2BOM1dEAEOyWVG014wyMxnm6%2B7Fr%2FZeRUtwcN0nlbRJJYLvbjmNxINMkBU9aCeJ4JjeURyBboLhb5u%2BYCsh%2FBrfwqrTUqRk95xhBRI481%2FAT20RgMw3ufnIMG59i8pASFX%2F8Na5kNBSArwQSIywutiiTTGiAZnmP328unFyeztkEHL2Z%2BKkGzK1%2FdVdHb3DFpBZ163tTqRZaOO0AUY%2FRkQaK7vHeN3RrGYH3ecoFZGaWl2s8NcmUz6L9z%2Flq11Wgw9GpxTbUuxixQhfBIVmWeE7HkWFF4eIoS5mBva0z%2FDLljPwt5L%2FsGU%2F4RSVjda2ikGwsgRkTjMQKCOkky4x9h3PCxnXWQfh7n4KspZjqDqhbeCR3SEzYyy%2FGFm8Rr3CceDPzTsvt3ywRIz6oroAoG0myW9m%2Fg4KzC1iFhH0QTphGgdJoMHAP8IAGKRRh2%2BNfqVpqZx6UX%2FdVbbgCCLXUa9AXAauow%2BqPAUnN1wUkn%2B92IFcG5xOQJSEaZ9Rz7gn%2B%2BZuphILStOpCRcYKyWnCy%2FcR6lxMzd%2FVcBG67bsS8uyaQNt%2BtbplyulCFbg05cNurC%2BiShqr6Jiyv6cGaR6%2F28KdLYHQG72iN8%2BKAiU73Z%2BKQ1vHUVmUZGgP1CWgQEGLlVUE4NWtQQHHg%2F%2B4boRxvrNi0nkMP%2FqAxKkDQGKYTtunKnBX2z5tLCRApB23YrIrqu%2FIuj0PErxF%2FOko4BzJHS1DRvUccOXwqojCxK4XwymF9wW1oW%2FvDfrqxtieiErXWiZA%2BHjizYfQ8KO5hsxiCRnUUlW074uYCSxRUW%2FG0nAMmWUWRkZRMuDqjQ1KhF%2FnYzgZW6SWh%2BM3WTtq4oy2gn3WYvTDNREm7cPwwdVSgKv4stsrLUXf1ljHyz9VpLNYnVKoewU9yf2eU8BHxQkZuQi0BJyKQlSQh2QSPd097M5K%2BSbOjXS5lwV%2F5YynAlUSAVfb9FzjD6L%2F71PGk9%2FrJaaeQ2ZKkoSkLiUSZ2SvlmbsQkMDiScmQKCC43jMDQPCoLI2IFilB0Yu84kpCm7HyDI8k6nytHig8ndP%2FFf18cu%2BJpduUtNGJnCDjDsGWPYKlNxe7Yrmu3k%2BQR5GkOm9446lSOU1qi9VcGisUhRz13lZylMxesrBenkiuLDrAhj9IZDkMtxIXfjGL%2BV%2BHqbieLSsiqZMu7pWQzRFqeMSzEpZJM6tQagp24Zhyrh3503EJBsTJO9SwfM%2B8Piwu9xef1oltFs6XCuI9KOQQYucHMHqeFRSr4g2t3V%2BMQPKMwi31h7u2qUtR7TU%2BITkncbCCCp5ONEcBpm8VjPFQD0hv1cfHp38JjtCSPYag3AgvvqTgew%2BpxGGkYEaDtIlhRQwxgd3UuUHoDXFAtOAJbFVVpmOcgY4IpbGACBX33JEH8vnZpeVGMKiR6IP2ROQbNSAyFuDCaEf6q7kdbUYiJV2i1%2B2hrPZGWjpthgZfwh0XeFNu8pjqXMTNQg3TVKAKxjBgVQjIO%2BVMsYRjzJ9QYx6igTgFhz26U9moid5SOcJfDVt1%2Fi2iS5ERTJpb6C3OHNshm5M1wlV%2BDXfAzDXmhE29EQ2bBHG6mMipFQRaEpP87mW5YdKYOw4%2BEu5YYRuA7hG5F7MAWSOI%2BjtpJJOGeg8E6BttUIbc0pUgLSepX5BRKAoHcEDNBAgsvcOWoc%2BD3%2B8mJPZJHfggnkGyanJrWsT3lRBvfQGSPzjawvMaipsROl9DJopS1pS9sH0D60%2BEeCnTNCqJUNin%2BNSJYYmj6mxXBIh1QOWj6OctJNaOc3F5LY3Zp%2BaFIaGdIQ96twh6Z9lvjxNNfr1OERJ%2BHTsELREXZ4QQgepenF7y6FtASNpx42pZtrS2xRbautjlVXUZA1ObWhKZYqJQXw2KonUk8ZbWxPnDyXDm5mNWdJ%2B4WTohIu%2FPYrcqC%2Fl9hbowCi8g1YzmvWCTOSNAK1pAZCyMPIvHRociDKSPjICxxJymrP7ULwr2eD5MpjmPwajIGwDOgRQWREQMorKKS1RH9wDTyZRpZy7rF3VL%2FRDo8FEk7gYHfpWyBINRDZYLR8aA1ceH8RlwVEO%2FsyvattuVbx%2F%2F8PJr8W%2FgCp1N8QWDEk0VeYKXLFccZGBHlA2fIlzMoWTmDtlOcQWKpE6xkg6SCsTJB4PeZkuE2yaV8MckHjnbcrhRZObWFgn8sxaVflUCJEpkwOITdDrE1S%2BOJf5w8CoSWa0NM%2Fe8B6O2TNJIYIWRR3Kw0ygL0DfGgxz%2BcmLV3rcgp1ISpDIe%2FqDMnLHQR5C%2B%2FM2Sd7h4RL137zFSshJw0ugIsfJLi5l%2BiYy6dkVu1Wj1qGX4tGE1hCygqiT0lM3YUx1hPXipsPYVUUUeJnWWyr9NBaxM5lNokLMST57XxjCEtI1CNf44IPGKqRzelpIAlPBP0%2BQvTNn9IhqsZd3F0Rkf0ly4sHVj%2F%2B5aLnOWTWbYKI%2FKussRAYatJO1FIJ6%2F4etJ6bTN2%2FsoaIz0VHr2GMkIoxy9gp3nEr4E%2FxCn75DZMePgfB3c2LzCk%2BLrzrKIfbbMqq5whvZpIfmdgQcs%2BOsvJOfSh%2ByQ8iozk%2BsjDtCNWmiPfHw3ABX14wgy7o7DEOXqY4Y2BlnuErWSLfOk4M9j92QzGU%2Bn5%2FthDMqgG%2FrXaQ6HkICfgEFhGJdx8APrrwH%2FgcQ%2F%2Bd%2BT9Uf%2BQb1Bu1yD5eb3%2FOn2r%2B4cXtNJ42F1bh%2FmWdqPr5TJTuwn4XWHkKGhJo0CjFVKJwYgKEytyBliarRhQYR0EsZ40BrhgiLgR0%2FWIhzr%2FyWI4uDbHJCkVPb0r2dKVXkvN2fAMSxmKsQ%2FM8TcwxzXILTgbz8AlxRnbYoys5mPQmW0iR7UGQU0MLa5GIbgTEfm4ZRjBxrHzRB3daq08T682DKMEqOvpCn%2FOSVRrL7ysrlr5whrPsZc%2Bg4vs1zEhbiUT6lh%2Ba%2FQJPsAWYrX2qDWBbXP%2Fg94F%2B69jPxJNhKJA0yA5lj8NphTuxtgPCpgBnqMHnEdHkDQw3iaH1bkZGM6vdAP8mM0wXIdMT3Bhmne64zDwE672%2FylM%2Fx%2FlfqyirC1YPoQyuGARdy0Iy66DMnIgpIByYnTEcCkorIhOYXSUIQR2kFa7I63yicdKFPS%2BwAiFbFJiKSx%2BlqDDQ2LQjxKD5KyJQcputROTU0pjszeuIpnHlCM7VtTKFQbEt4QF2Eqba9sMFoDC3aqot5cJOIqadF3hNblI1qEkQCG3X6KgHBBHimYdhCOsZh27hTii0OkSQAHA%2FXtKlhfZ%2FlHwu5%2FnZYXbMJ%2F9X%2BBmFuObmWfENgUCNbcRz5myZ4CawRWLrbyuzti2vB5Ud9Eg897XWXE4iE2yK%2Fua5V5dkiIcphHvYa5wuGFyKTtVSWuAgCMEm293k4XVPeMXuyj9s3IJdce4BB2dHtrA6OfoBPDjMD%2BbpGyb8zSIEwnaF4DDLHykm0rYk1kOu8WA18nGAwzQ4BA%2BiwZtJYxLHtRnIkexhsDVgIUFSzcxDJCxujuwUYl0B8Z82IxUZxJItr9Fv9KptgqsNASW47iwBCI1g7W0lZQNSUqCLLMmi52fWxjGjZLBPbp7xLt03ddL4GBhWhc33SoDUoiZj4zZ3X6GFL63UjwrvyGJ8pzfQtHu2kMGap4rG5xNJvwxur8LKiNeVFz39wwZf78uXvRXplitT4xCQpthxC43mmSlZsi02U75nk71i8hcalRYpFdlqTLfsFw4DtoutB1CG1V1y%2FVirUhW1whlMZzQhmfkLTBafwXg8gx7L97rxJ61%2BhMPnAQGt4%2BaDmRLYihO9QvZAUP1U9CfNXZ6WjNcmoDTK1yY1FqclcJ28MG0yAqyXcuoL1wYBVxil9LdCVCUL0ivBDcUyKlyYMTiRwTG8PKwYhnCnQZ44FoMrmARnuTRkWQPOqipRKBQJZiHpemMJNA06Toc%2BTabkiIiSIJX4M8QfG1l%2BDIF8jQdNjUh3yBhIrL9saqUnWa3R6QZwEwoJQT5g223OrWxWxjxiZ7VRs4%2FLurv5zLYMv2ExkQZMKkqFVsTowwhii3xmlbBQ0ZUOJgBBjXulQZey7JL6Fdj1%2FHskj8a9X9mG%2BXkgklWgrBgcGSW2iIXRDbaoZdz0R5rYv6s9FhrwdTviMeajJtGgdfVGHr7GskvWKQhcaUh2bPophr6gEOhQ%2BDzJM5E8insoUGlCjNN8isbEGUb5dLAwYNZ813HntpmeC7E4vIWGF3fMdZXKlBKW1MViUWGoiFLIk%2FTf2hKFsWLeCXJi2SGPS9u1IbSDiDeOTKjG2%2Fa%2BqpfnV2%2B3wy7%2F120XPHK%2FUN6r61mRrsF4k14Yxxr5HgQ28doq8PgVGT70%2FkzvxaLhOxLAWnP4Y4Ui1RZBI5PsAmFlZ3LUnUFrig%2BodNBu2L77ZRU0mQn7E%2FzGxvuFJm9o2VlLHruWXnop2CerHnkgiDVZXFnqstOMu1cDmyzWuZfKEHBQuov%2BBW%2FAB%2FwuHPNQtEZzrVlCUmozkrDvVDUQDtLFn8GNZ8pjgLWbvxdiUt6mgP6O73qVSWYku9mKs2ZPygub0mjKSYBhLtQmo8XH78b2GJJvXTNOLt2XZwQTOMVsdgXy3AvLDqtZWm5TGV%2BxiTAtzWcbNKGSE8iSXG3OmF5u7rvdk1eLf%2B3Je80NaO8W%2BECIsd%2B2l1OTIaD5CSN4nenustluZWeuFVKo7q1hbWc7DglB6AGqWOjfqEEc1Ws6M1gwW4lCiiIUDDFZ0RlYPNLLHgCXSuKibGw%2BbEvZ%2BzasWkjIbZmGHj%2FE4TkoMEHOJHQhH%2BRCWgehfG64KSlN9WWEp5EuYwda%2BD05%2BQSxRpASRU8BdgFTddyYICdG4yGo%2BT5%2BJ0WWZF6SRv76XXM3hioT6y3io%2B21VI1WNyYvM140uwDEwDM1whMKxo1iQziO3%2FraZ1OS1Ha9NNiUj%2FlUcfRK7hBoBWA26qsbFX4OC4y7h9OB8Q6ThlXac1H6ECDsCz6ETE%2F4jeflEqxMuDpIuOhYOLTpjuc4VwmMEIrTLDpGFGplcgZtDuXF9Pn5FPJqr9nV%2BqIcq1lY36FZS8RWXlgftmYn%2BtMLR%2FOS8cBql06%2B2tAGykYcT%2FTANbeoSv5YjiABePLnx%2Bl8n9437yYLC5SSHnSpTN8t9unwKhgTXpkBo4LYFkpUu%2BXc6dV7KiwBAKd9rCv6KCFGmflHcoLAF7MeI9dFf5%2BUbqhwD5bwTUGfBgJR0b3B%2BzxawbtpGFHX21RFhLNugEPNxV0SwGl8YRvQefqBE6wZFJxSnxhf3JiinKisCBsWaavWhjN09kPHTBTexMxKmoteV1PrCUL0nTDOaU6XXwZdWLi3luQMxzTMcFfWK2R06ZMunA0FqA4KwuguHWknQJZyzmy5eyKIitnlyoFScm7XVUhUuCgUGlJ2rC2WHGSlEoy%2FMuSSmGycILO8Z9C6ZzCYGZBxWy0%2BJHn9hHubO%2FLV%2FKhRyqWrDGKMjaafMVz%2BwhYfUDfW6XJKVqCEIkhuC30PZ5bE1AltERxOoIZSUWlDcXA8ox4cBjZDshONA0zW7bDweBLCTklG8jrDB4X6pEbkrm%2FNGxeUNQcfqvbrgNmFxov2wmlE4V%2FZSg95Ay7EkuXhKQUT%2BY8Zo6lS2qaQrAilp5X6Jrnmc6Q45YVYNRh32z4dR8zayHIRySzVkipa8yHPWoJ4hFVsaTSPXTYUN78ogFk%2FkySZycQmlXk%2BFUhHA%2BsRpRR8aAeVBFCl2kgXJvLHaR%2FrbNFl5MQCqLMXPPNNongeXYGZ4H51NF0anJmPdG2EGZs0bbDadg5i0%2Bezyw%2F%2Bd3qsh6OPBFzSsRdJO7S%2BpofVUXEZnjwvQ40FsuNHarYY7Ai3s0wevBuBEg1dpHXcp3xcufhmgAE7D7fxhBYA7jEH%2FmgH3ynn%2Ba6Y6MPLEMQGAxGEQa7eJa3kNZr48bmJopXmbKbN0S0RJ8DVrtvgdU0kwDM5E%2F5LLOjSJb7PWsixnAX%2FHcda%2BJvRLIN%2Bexqjkx4685wZNo%2B%2Fk3Bl2UJbb8s%2FrLH%2FFfm5BJpxrhFFszKv%2Fvt%2Fu5D%2BCULRYpcopuypPMlPfpnyy0bQ7kQIc4G0O2GdvvEHgIR20pwY2a%2FRpQSZVKsNYKOC1TJMZhqsNAt7OpeViTIQRQHug1kmNx18ItnIz5ej4dcZE4oaXQ2siAxoi5qUaUYYN%2BvZocH8IWf6YVC1qIxXsjq6d6QXijQLsG23bFd125jEFyv5IH%2FP%2F4H8QVgtmOPoQFzOH%2BoCK2UIh2tZaPNn701UVOTIcJzkQH%2BRPCL5xjVVrysb1SoHNoT0OG2bxq7ubOGrH0Nwq24K6xB3JT3%2BJsrtcPEtx4RZSANPW%2FSSKv8JWkQhLvxyRztlMBnbtFKiVaQweRgWXSyqLD91aAU4dbKp52OzCcWDX%2F7IS0kbvpHit%2BgONAKnrSL3Y4PNTOQQZxbqTvJrqJMqTVxp6FnNOYmZbA2FUfdc5eGmUNasrRb0lBmlbTvrY5VqLGUnQaU3aIBlfYsJo2lzsitWq3ecc8aAuHiQheeaBBPOx27%2B4WyK9wIecguSeLEn0mrDcgjgd76ldiyN%2Bw%2BeO2RW6KDFHHd5XhJGUmWAlq32zzmOTiWIwG8DBf9zCF8Blb9Ni%2BxWnoFFZm47BKofYaOLHseFWvS5ZthZSd2IUrIqWjCSD7OFzLLgYvSFOOptUakVLMawJgblfgN5QBxFlwDS2pT6oAP7gaokDNybTfsbpA2JPnCtKKYfqYu18922CoMVcfQ6s2oOuYugfXMhmfu7sq0NFmKzpP4HEWnyUp0mqxr%2BxOXznP8hUKbbNl8DE6RBIVCuPtcLE5AbvHb8gkSKFDGS%2BzUWIiJQJpVBr0ly6QSBWMXyPAUBhrQVfQhEGykQaUMfeYwrqYeGSb5bQWISXJBRBDSwATBPRF4QQCVEPbPxE1EsGQtR%2B4TBUHAY8Myu0aeGOkgEsYFk4%2BmwoFSvKNpRKQvbX4SwDCg4WKtAcYoFUY4YTFTtD6CMpFxoxWIU88fo1ksQ0B6eDVYnHJj7DrDrjka%2BekJ7IeIZVy74PVkMINjZNCxKnkKQ08K9Zu9tKvXKxX6Zj41x4XaBlYwJF1ZoWEwU%2FzyVjuUzFFSKXfnD1viiFyy25ycJOyshT6iLCU1mGRif16gmWIi7SocdOrYBDnlNbP%2Fguf0xN4uAGaTV%2F6qSGaRXjYpc6qqsmNxR1lYTQPbwVpVeS1R58NzrOYqKsMcL65NbmjO%2FaB%2FNNtZElVSWprd7DApN6EAtS1b6yx1o2Q1WkJCWK8924ZnX6SdwonMZNqll3DQgclgOeiSdSsLDZdWiNm1JtkaTP7Cur2f0ktwVtdLjCI9ZmFmcfRDB7wNIJ5ixlbczQxvORj37QHq7rcAcfxOPRNFZGzP9oG8vkNeohYWgZK60IxoagWyqwzStUBhkRVrKswgL251EmXaLKA7kSFK%2BOIc6yLtgqRYQZADUyAHCJ5w2PDrk5SsJ%2FRDRm6osNkacFGiaOqn%2Bz2PgpGsfECtGkp1w4vGs5xgrBqm8MIClo32RwdVwvuBcpnT2gHbJ8Pi8SwPZoFbjnZiABOc4uRV6HODifUa9ISbaqQJKw29rMF4g2EQwCvssheR%2FzvalhV1Y92B7Z22i3MoXcyJcjSKcBj9DwWeQTgFyn9GqU7uZRd%2F6%2FIy9Dvm8hbHF%2BRNi%2BLokq27NAxhQVFIrZbO4PMJUEkJ%2F7ym8tQqykyFSihsFTPU0x1WMe43VYXEbtQZzJYXQxSlzaykkmE%2FbsfRLJGO2aFsYnAvheWnKtA6VVg90A59bVb3tUlJaCSW%2FJrPS2vr1XJt8Lik8R7rMrXmk5rNpgxjC9QESdz1pN9H1Jz6dgicP9E6Rqyt%2F7pp0wtMHogLtXJ6E%2F16%2FPnYXt3IbEcHb3c6gIs4U%2FsevAWiavBk7tjH3%2F6Hv%2BY0xOGkv6QXE54NnwwD3qtid6xJ32f7j9H7rNu8LW1orWB1WAPbSgu1nB5JqI%2BkHaZNft1yPdtt%2BMCMtLtzhEC2emox78OH4UAc30I9B5OjAGzUt4a%2BA%2B5dXjLPxwlazGkGyiu2RM4kVN7aGrP%2Bsflo1GWAVgQvf14zsYFmi%2FZw6rijIXRWFz27hwXdxIK6Ns4%2FuRxZbds9rOl%2BrCmsUYN2wu7I1d1uTbqwH9fKT1GYkYQCzTaBYbbtq7%2Fip%2BsUhhWSeM4CbX4rm3ZX0CGhoMq0FISGkIoUVKIywkR%2FRcEcldIusWKwrD1Y4BbMkKC3HUcTNVusDBUmUn34ywKmK38P66ZpeTkZrCUvNj37Ej37q037v219FlnxW%2Bct3OrN8tdkzC9d1tU58wRvIkOByo4B7suMHqkLf%2FAxEi7FNI%2Fc7X0anE2gwrKCT5stoVfEv2STLscZEkVdR1meMWyib0MsLermNEk4ioIGcPyK6jnwpejytzUqcoS8uUta1X0iB5YXk4nHKeVva9esSaQlSPgkPlZPxmqcJS39RUEVaIQP%2FCrwsZ3HHouxgdhmZ%2FQSNoVCsMeyS3c5d%2Bn%2BvU0jc0nrLND2UjdN8hd6UF1S7J5RMzQ83op9KyqJotywv32sYGzDBhaddgL78aEJcobdIxJQhU7fEjnqldDl3vE%2Fe9ieDzodou351lEGQ9pbs0hws2uu0k5YtLKlEB8MrCwBj9vDBebjCywXs8BE24%2FveZEu8WPWXPHFNV5U6cIeJKCpld6XTP71F01I9Ell1FWzOnUUl62rsrIDcyyzSosZRkJeqyuvxMDzn5vTv4Ds8JBNFJUdvj6xJcAtskYIkp178yM27a9Cl91Okw5Nyqr%2FqzuGO6v9ClZEx%2FXzZk5FFBqHcBUMBUe1LcUuMlopinIy0syLGgOSQGdwI6U4bpQBhWc79pycjFeKDD1hEfKNqXfFcW%2BVnq94h3Vi0jloJ5T3utW6rkdVfXEdrTGku7Vsuc0vNx3OpwA6UIJ0Ym3d3mjQnHjrL2kWFQuDDjKXrq0ryrKlS0cqLGDhyFl%2BpbrPrM4rDndQo010vKrxRnt3OE%2FO2vwit2Vba0vsRdbVNqeqay2yJjRFpdhFTnLr7S%2ByetCzvx1HDztBrtS0CYNcrWmTTbcrmrZKJ7%2FYfQ8KcKfDJJRfhgOt5tm8QYirYvjbDvdx0GgvHKqqrxzpqGcBxFyoxPEUKhAFOQRWCNGXKUsHW1BBwQwBQNY3KR1spc21bbZ0aMuqqLfXkg66rvDaOm7ab6gAnBqPCW9fPJA7H8RDkeKBMP0M4kHcLfFAyrIp8fD7JUNI%2Brl0CBBILGWXxYG2mb29yEoSssN57zBDiOVyMMjrR05aNbOTljhFd4Y3MJL8MaIThG1SIYqPgZocGBLq0qCi9glKNrCndJ1kH1gPUbp%2FzHq4kiLyYlyp%2BBkfmjN%2FUCBX0jOoID91m%2BuKKlpKJq2Sb8v2Ur%2FCegxgHe0wmZsoM5LtZZZjnC%2FQ96fz1GpssPdV1uzARULgS%2FTcLmUHbicGKGXOASSEtSviRafdk4kY4Now4%2ByoYaeDVmN11PCoKkDgcYNHFi8WVRwCJK%2BAf3Gv6VqRxN8v0fTcIl5cidOJBAjbYu28aq2z3KyFYOL%2FJA5Oh72Trv4EvEGcTFkULfZHVjt%2BFy8rnR%2Bk%2BlKpXly4W6edvih8G%2FfpIapsRUnmatS2%2B3sYwk2k46aFcHMiCC1BEAqjOivsDhnLxlKLogiBYyjhuBUuNMZQm1vYp26Jp1iGXfNM0kfPRL3sdB39HLXCMyqpdHNoUreCQmRGvp7ESg4trH5P4BihhIOjOFddXeD4jLq6wO1WFFHgGPl6i9jRr1dvF9Sfh69YlDh11xXakBaT7WE16M3D3dKNbKHDRePW8Ajy%2FsF2rKhNq6YeSdyieaxRI63VZdKBFnV5pUKQEXWl5AQ5l3b7GHeFzz0S%2Bdv0Tj7RiIdXCCpQNNrIUjMKKwoSuAywMAch8kMhkjXWKHC7BekQjjzWjxzmntku27dC46ktM4rT3DzN2L2vADdgm6%2Bl8cQ%2FhhdfQxNHKMd%2F90%2FUVi9gXPChaYZ1yWq3w5F9B%2FQiDw5XHCNLtpnVGAY0s76tMANa4Fj1v99w1KS6HkOBKHB%2FwP%2BIcDPnazlnElTwC2vtciIhgSo6UBl10bzMgrcrjogYRQdB43od6Ugq6Q1vwH9Qj9Jh5%2FdY4tbaehTtA2QZ%2BkhnMw3IdwOLXg9HQONFHAx5Nt1JagbWJWyYdWVICCbr6QwsqBpElyM5iT7UwMKjyKyrjzwspsVKc%2BT7owG4oA9PmGFzBJaXDj3M8MbAmAo0LYt86TgzmH9hBuOp9Hx%2F7CH%2FJFDza632UCg5yBoYtm231AJPFGpty7fAf%2BBxD%2F535P1R%2F5BvMFxag6LV6%2F3X6VvdP7yglcbD7tquyW85LcNWjyn1oYXRo5gsJmJxwc36lXgGOULPYTlo%2BbUGN1RgS7HAFYkjcwHLg1zsygZGQxvlp5RR7glgair6%2FdrMD0nkVaGUoyBEWIF3lzh0rwPbzMg2E9XKvC5n1PiK608Y2j07VyLI0m40FuoLz4bvLc7c5zfdOGonq%2FUXlJMdGkKJLSerkRtJBowtJV%2Bc1sCOGDYXnDUeMMReua7tL3jvniL5aJlChzkRxmILpwM7MhmjUFzokBBdgbYwlp5I7kbo6S8zhX9KQtszdHlWLEGD%2BpchoqhAFWYGS1CnaiPlyepTC%2FZrvPc57XQ1udOZbX5ZmC3FmY78wUG7Xw7avNQVSiplRQkvkFYP%2BQrfLWwLKWB1sIlw9tXBJsI7VgabCiCFPU9O4HNNThDEeDnJ7iffCjwdVmZkpdZG7kJ5jFgutFHyFyqHROvQEpycYXryOs%2F0IxTnecnQtfjgsd41j3VurhBKEd6%2Bz5oO3MXcwfWeBUukxbvqyVnjvnr3n1k1rlNJ9uD9jS24ngj3CxzD8AmBKTcCVikIGRyZB2XyZ3lLZEpXq5KCmlGV3FDeEhn5CvXDHQ1IGsdd0E40f%2FjaUDZRSylUVCUbs1c4S%2Be3lLSYiPywIVJY6HfFcXshiyXJ2lsFhzEWKAuSJh5FYBZKHEfOZ%2B%2F98t1S2pzZQFialIENZLUoo3VWS8TGD1vL8LyWpN1kZC2ltQx9qzAtl9oG5FZ4eqhb5WZSCRkaXBx07l3TuXMKv3NJ6mO48zarcQusVLlFdgWWq0SqHjTtrAudVLVZ0paJxFzgSmdIT%2FvV2cwJGFigmDFCuApjzgt0lgvZHGhAgw3BYFmq6y%2F0mxWktrIWlRkAKc5rRlSIeMZGQd12cgilpu%2Fa4pYtyf9EhruTnU5RXJ6ZyMoz%2B0Y6BUSAyF5awIJ8XhMJ4sAM0qiKkb242dY%2BgB9RRHWI3G8kcv%2BTjh5pjTu24ZdJppgKEouqVUZgSC2qyZgg0oGhFQD2jJYt7H1wUG%2Biq0%2FQncK1ZxiEIQZ6dO2TzXVzXPuDg%2BKvdVCISU9biJazNQeFmMVBERakrOBSB%2FdFJjKg3BeSEkqpVQ6M4mKFEq1qUStadKxQ4OiFqtW2FyvckeACsO%2BOMgYXpNxx2NmufrrhddIIKNrTL9IOt9bEhTMecKR5HTe1G7leqdUHPGv9oGX2WoyimIWYqMTVWXFFltetQEahUNO4e8C6fGy7LnbvamBdFg%2Fap3wFwiEy8BI5b17yQ8LbgWyWA3WEV%2B5YNovESndYD8mWF5Yh2ebSwBUYZ34ol4jqDNXoit23u6gD5c86uTrDKSARpoo%2Bjz28ALRbYV3DbN3K1Y1LX1krJboU8MwaEY0vkcbQmykTkb7baDjpWPz2rqgi1FRNRMahBIEIljvdvTGqhaQfFwwUPsrtNo8FWOMHhggmBo6UfMLoeHDAmYcXtuZIAiGE48RjWmeb5zd9BB4wGF816DwCkWjBQMEppWbBFqVz5u5FgBJVhI8DrPUaKkiUj3QB4UCk3vHGhTDZjJ8msApXsYSDZc9mF0mYEl6kzXqmg6dARpGO%2BDV2bSYBN0M%2F4Z%2FI3oSpmE34N9yI8ZOW3lRbSnyXdqyB05%2BTSxRrANc6eApQuZqu5UB%2FIDcYDUfJ82n7XS9pYz9d0mZhM5BIBF3FjCbyDPwb1P7Zt%2FpAM2M8pfbvv%2BkxnRSWUvSYuH%2Fx%2FG5uDFkXuQUUTgfGY7mh%2FUmvMM0VEWvScT8mA3Inug3Tdme%2FqDff8AImn%2F8v8uXnNbNZnwoEmZ%2BqlEafeJzq2llzelotVYNBZXr%2By%2BlLAOOogTD%2BJ6%2FnLQsNb4mNHFhboaxNRvwL4XUBPdRUtjqzK%2FfT755rBCEJVWEaiC0ASUMfTISohu0ChNpmAPnDR34VnpLhcR1ZE7CTkrBoHAyPmAi1jdx5m%2Bvq7umChhDsGrRXNDnsXrXV2c7gZtmP6U%2FFst%2BL19u%2B7rUnIg53TOBYaJWhuwPsZBVKP8hSOcRkCbPe5hp4Y9cZdvdjFbBXB0u4MhJaqHEtWAjIPfltT%2FVfxDQB4RvlSLvg6CZQUK8pBOKqyzGNBWyLUFGB%2BLC%2FfhkP1kQhxKUhNhr2rclCXCSza9uEE1jTe7fhV69A2EMcmR%2BGvBQrmm5BHvamQ4jRei0icxUYhjGrERRqHVomwa%2Bw6Uk62kUpAp6qBkwK3pB15wTfYVAf9coHVXHbbjraFoRVAUa%2Fn%2B5NO7i3DgLp28wPqDpGOcY24BF%2BaaR485PeRJi8%2BzDjVGB7wczDrnbpEmS7hL9Z3bWwJYg6CjVkc9GiX4F%2BK0D38OIq2gZY0FciDsdQHOvIVOAipxQoanWeKAxY%2BAroEfjp2OKrIimMfGSGEghxDX0wOPR08AF5nRf7E3%2FYNqPeX0m9J4wduxNqEY015CUhFnboVN8pE5XudbKXXoZk6s7mJ3ocnVa2Y%2BD4n%2F2Y7oOdsynuuU8uWRXKfQP1egLMVEc4zkDyYrkcOA0kqLPpYiRrL26kw2LWAzMtWtaBeTd5tComlGnwCF4VnEJZTepPUOfDypYUSEioYx1CGrmvSzWIwwN7Rjfi28YI%2BqFpODIcLmK0k7eB%2Bn9j31aYAnxg2geVl82ukxs6tLBUaFYbfEQJDikxwq6h7SaQFjHRWA4iUjPiCmGYkOnsJGBLUiyFGwwDKtx0O0D6PuFQdTi8UHEPnDUVkhNeDTy64AP2KgT7ibIEDtvosI2W6soJktyqz2mBH7UPc6vC%2FarpkUmOGuM6CuCE8o%2FuS7rEXxXGiNLctoftvrWQzsohZX3qt8oEdycjm4S2DvGqQ7zq2ybFDqXt7nk6dtQQS9jOePYTeYE1eH0QJqktTZ5gxUvgI%2FApHRl9RJE9iK9ti6%2FlAC3ucQHsPGVSwOExLH8kRxMFrgFk3pql72m4EEXVm%2F6hUJl5joFuqPE6q%2FFViEaWf9GpLO4uRMzfBOaRGTZKFnYLzIP0%2BT1AvewEdUi7RR1k5AeolwPUS35QL3qJU%2BPCVGI2cdo41Avd5CAbnR6gXlYogQeol9Us4QD1wmYXGlfi4ujSfNj9ZHtoL0SPO6C9HHxwu%2B%2B6OKC9%2FAanzcohHdBeDuGFA2ujwwu7g%2FYypjbQTi35oaTtsId3cQ%2FTda90MU667bkTmfm%2FtUr%2FkBJxSIk48LvN5%2Bvh0DmuFcwWnT8YaNs20LYQVc%2B82vsRZ9eERJidFRmQSSw%2B1hqzwCC7trtB9kUflhLHJ3uxKMLR8m4s6Fvddh0wU7Dt4N8Wtyfx1gyR2R1rwkE825uiSf47NMkdrdUb6LdRY9vyerBdI%2FrhFklT3zHSZIVGDiklW6IOhd8t6pBX9lP5y1JKCELbIY%2FkG3kkWlxbVHeiZZDMaPV6yCOJD%2B%2FvyiOJwHZEtnw6xsUhVySftkAKo%2B3zphNF0lMoD4kiB8%2FkjnnjaMGBK%2BExwh2sCaqwoO4ieKxB3VCIxLwOUl6U74KHQr4bjkeGIsNEhf06qpM%2FuEOLcYdy%2B9rZImxoEUUPRtVyh7jhX8vvcJ2kgYoYK6jdTBTvxgwSeQ0uqHgMqivpeLUMC%2FkBO4uihH8PlD6JUU0XXmKQh0oEvnotjPIIakHyLShE2QOT3XbMaeWQ1o%2B6r%2FI4xELt6dLg96YG7nUITZUTRpDKMIIklhHEi8VZQYzSGiYef8Aq6fJ1pPNpBDUfY6JC7hc2CDMYW6oadvRI6rWrQPYIA6UANzFV%2BizjPRijgl4INYBYKL0hY5ZRYhNGWjOPTKN8cnlmxoRNWjr2ot1MME21CZj5Zc9SiMYeTsP3n0646rDpjQMeCiYVrJ6JHg1EDZQ%2FdNpWiIiDcInAOi98PktGTqloAfxWiKpcYSMSQEEdgeiSuNg6R2QfjbW7BPsgfKQMSc7gWFhAEdMF3MQkc21EsQ5pdKBoszwDkY6IutIIGVcgCi8W9s8zCNoGuiM1B%2FTYwyIn%2BkUxzrXM%2BlV0syb6%2B6FTOGnPlAgwFTUrif5%2Bmd6YNQkhcmSkH0cqZYWgSxSLkTi4vwN4ULMWN4HTlCnUf0uXIxdjyqLgvw0D3z0Ldt0SMgtpKdzSIcY5tqvji4c69%2BEHr0VY7GlODpiiNXrAFPVFO%2BRoBCGLMKfU7ZGVb0VvHxAF5dEg68wCkA9yr6KLVEXXhC6KKCuVA2I3xEBpNuUAIDPJtLB5oEXeMVyO%2FXLtWsGBvt1ZKFH5azmKllByZI1WckSOlSek6oUFvllxnw0HvnmBXrV9CnyTcHaGwLe8W4FvMnJGIGCFbbciXLXCsFuCB%2F9rgsmKUqsBHl1k5EhKBpMFTqdZisCzg8lSYZaTIjIsp9SwZN11Rq7jz1FRut1eWpaeInjAcvRHkwyW7jiSqRX8KJK8RTElhiRLZgzoOsoYADYXcoYKAUsKJJzIRc7BU3DFwNme1Ubsav0srDXkTQL%2BSeAEBnGwjGq9OMpgwVUcxE2%2B4kbOLG60HRM3LGCng7jJJG7K5VqtXN6wuBFYuUubFzeMdIUV2CcHMVOcmOFZwEgbFjPagZF8PwmyqmyckYispKeNMxKVYzAS5cgUUE%2BHSHoIg7WYxFNXIQHLcuA8CVwuKmozoh74TlF8R8iKsFQc31EZ3hTsBzQ5VlZSpDOegSP5uYGARbt5iCjgQadJoYfh8AHsQhkPKASBCjxEMxKxiEQNTJXEGirIuYqdoBqVpRKNCNHDCD2xOElADl3gKwNeOBvADDpnabXwXqiPK6PqPto0SyDJC2nDWV29v2pR4h0uTPag0na95wy7fTuwNFbtfAteRnYyV5J4JfpHJVcEux%2FuU02UdJmXZEXkOSW2azkGq0i3lzbqUCk0O%2F8P4AwEC5n4aDWGQ%2BX%2FM4R3pCksVYDconxQ%2BwIu5w6M2Azf%2FJRUkAoA">参考这里流程图阅读会更加容易理解</a></p>
<blockquote>
<p><code>BeanFactoryPostProcessor</code>接口是Spring初始化<code>BeanFactory</code>时对外暴露的扩展点，<code>Spring-IOC</code>容器与允许<code>BeanFactoryPostProcessor</code>在实例化任何<code>bean</code>之前读取<code>bean</code>定义，并且可以修改它。</p>
<p>而<code>BeanDefinitionRegistryPostProcessor</code>继承自<code>BeanFactoryPostProcessor</code>,比<code>BeanFactoryPostProcessor</code>具有更高级的优先级，主要用来常规的<code>BeanFactoryPostProcessor</code>检测开始之前注册其他的<code>bean</code>定义。特别是，可以通过<code>BeanDefinitionRegistryPostProcessor</code>来注册一些常规的<code>BeanFactoryPostProcessor</code>，因为此时所有的常规<code>BeanFactoryPostProcessor</code>都还没有开始被处理。</p>
</blockquote>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">invokeBeanFactoryPostProcessors</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 1.getBeanFactoryPostProcessors(): 拿到当前应用上下文beanFactoryPostProcessors变量中的值</span></span><br><span class="line"><span class="comment">	 * 2.invokeBeanFactoryPostProcessors: 实例化并调用所有已注册的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Detect a LoadTimeWeaver and prepare for weaving, if found in the meantime</span></span><br><span class="line">  <span class="comment">// (e.g. through an @Bean method registered by ConfigurationClassPostProcessor)</span></span><br><span class="line">  <span class="keyword">if</span> (beanFactory.getTempClassLoader() == <span class="keyword">null</span> &amp;&amp; beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;</span><br><span class="line">    beanFactory.addBeanPostProcessor(<span class="keyword">new</span> LoadTimeWeaverAwareProcessor(beanFactory));</span><br><span class="line">    beanFactory.setTempClassLoader(<span class="keyword">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>invokeBeanFactoryPostProcessors()</code>方法中首先会调用方法<code>getBeanFactoryPostProcessors()</code>来拿到当前应用上下文<code>beanFactoryPostProcessors</code>变量中的值。然后再执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());</span><br></pre></td></tr></table></figure>

<p>来实例化并且调用所有已经注册的<code>BeanFactoryPostProcessor</code>。进入方法中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">invokeBeanFactoryPostProcessors</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">		ConfigurableListableBeanFactory beanFactory, List&lt;BeanFactoryPostProcessor&gt; beanFactoryPostProcessors)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Invoke BeanDefinitionRegistryPostProcessors first, if any.</span></span><br><span class="line">	Set&lt;String&gt; processedBeans = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 判断beanFactory 是不是BeanDefinitionRegistry 如果是则直接调用invokeBeanFactoryPostProcessors,</span></span><br><span class="line"><span class="comment">	 * 否则将 beanDefinitionRegistry转化为BeanFactoryPostProcessor 然后在执行如果是则直接调用invokeBeanFactoryPostProcessors</span></span><br><span class="line"><span class="comment">	 * beanFactory是DefaultListableBeanFactory，是BeanDefinitionRegistry的实现类，所以肯定满足if条件</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">if</span> (beanFactory <span class="keyword">instanceof</span> BeanDefinitionRegistry) &#123;</span><br><span class="line">		BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * regularPostProcessors用来存放BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		List&lt;BeanFactoryPostProcessor&gt; regularPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * registryProcessors用来存放BeanDefinitionRegistryProcessors</span></span><br><span class="line"><span class="comment">		 * BeanDefinitionRegistryProcessors扩展了BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		List&lt;BeanDefinitionRegistryPostProcessor&gt; registryProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 循环进来的beanFactoryPostProcessors,正常情况下，beanFactoryPostProcessors肯定是没有数据的</span></span><br><span class="line"><span class="comment">		 * 因为beanFactoryPostProcessors是获得手动添加的，而不是spring扫描的，</span></span><br><span class="line"><span class="comment">		 * 只有手动调用annotationConfigApplicationContext.addBeanFactoryPostProcessor(...)才会有数据</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">for</span> (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) &#123;</span><br><span class="line">			<span class="comment">/**</span></span><br><span class="line"><span class="comment">			 * 判断postProcessor是不是BeanDefinitionRegistryPostProcessor,因为BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">			 * 扩展了BeanFactoryPostProcessor，所以这里首先判断是不是BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">			 * 如果是的话，直接就执行postProcessBeanDefinitionRegistry(...)方法，然后把对象装到registryProcessors中</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			<span class="keyword">if</span> (postProcessor <span class="keyword">instanceof</span> BeanDefinitionRegistryPostProcessor) &#123;</span><br><span class="line">				BeanDefinitionRegistryPostProcessor registryProcessor =</span><br><span class="line">						(BeanDefinitionRegistryPostProcessor) postProcessor;</span><br><span class="line">				<span class="comment">/** 注册bean定义后置处理器 */</span></span><br><span class="line">				registryProcessor.postProcessBeanDefinitionRegistry(registry);</span><br><span class="line">				registryProcessors.add(registryProcessor);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="comment">/**</span></span><br><span class="line"><span class="comment">				 * 如果不是就装到regularPostProcessors中</span></span><br><span class="line"><span class="comment">				 */</span></span><br><span class="line">				regularPostProcessors.add(postProcessor);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** 这里不会初始化FactoryBeans，会让bean工厂后置处理器去初始化这些常规bean</span></span><br><span class="line"><span class="comment">		 * 并且将这些bean分离出来按照 BeanDefinitionRegistryPostProcessors实现的接口*/</span></span><br><span class="line">		List&lt;BeanDefinitionRegistryPostProcessor&gt; currentRegistryProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.</span></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 1、调用 实现了PriorityOrdered接口的BeanDefinitionRegistryPostProcessors后置处理器</span></span><br><span class="line"><span class="comment">		 * 获得实现BeanDefinitionRegistryPostProcessors接口类的BeanName： org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span></span><br><span class="line"><span class="comment">		 * 并且装入数组postProcessorNames中，如果自定义了实现了BeanDefinitionRegistryPostProcessor接口的类，并且也在自定义的类上打上了<span class="doctag">@Component</span>注解</span></span><br><span class="line"><span class="comment">		 * 在这一步还是拿不到自定义的这个类，因为spring还没有进行扫描。</span></span><br><span class="line"><span class="comment">		 * 扫描是在ConfigurationPostProcessor类中完成的也就是下面的invokeBeanDefinitionRegistryPostProcessors(...)方法</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		String[] postProcessorNames =</span><br><span class="line">				beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line">		<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">			<span class="keyword">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;</span><br><span class="line">				<span class="comment">/**</span></span><br><span class="line"><span class="comment">				 * 获得ConfigurationClassPostProcessor并且放到currentRegistryProcessors</span></span><br><span class="line"><span class="comment">				 * ConfigurationClassPostProcessor是很重要的一个类，他实现了BeanDefinitionRegistryPostProcessor接口</span></span><br><span class="line"><span class="comment">				 * BeanDefinitionRegistryPostProcessor又实现了BeanFactoryPostProcessor接口</span></span><br><span class="line"><span class="comment">				 * ConfigurationClassPostProcessor里面执行了扫描Bean，Import，ImportResource等各种操作</span></span><br><span class="line"><span class="comment">				 * 用来处理配置类的各种逻辑</span></span><br><span class="line"><span class="comment">				 */</span></span><br><span class="line">				currentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));</span><br><span class="line">				<span class="comment">/**</span></span><br><span class="line"><span class="comment">				 * 把name放到processedBeans,后续会根据这个集合来判断处理器是否已经被执行过了</span></span><br><span class="line"><span class="comment">				 */</span></span><br><span class="line">				processedBeans.add(ppName);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 排序处理</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 合并currentRegistryProcessors，这里为什么要这么做呢？因为registryProcessors是装载BeanDefinitionRegistryPostProcessor的</span></span><br><span class="line"><span class="comment">		 * 一开始的时候，spring只会执行BeanDefinitionRegistryPostProcessor独有的方法，而不会执行BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">		 * 父类的方法，即BeanFactoryProcessor的方法，所以这里把处理器统一放在集合中，后期统一执行父类方法</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		registryProcessors.addAll(currentRegistryProcessors);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 第一次调用bean定义后置处理器,这个方法比较重要，需要我们点进去详细研究一下</span></span><br><span class="line"><span class="comment">		 * 可以理解为执行ConfigurationClassPostProcessor的postProcessorBeanDefinitionRegistry()方法</span></span><br><span class="line"><span class="comment">		 * spring热插拔的体现，向ConfigurationClassPostProcessor就相当于一个组件，spring很多的事情就是交给</span></span><br><span class="line"><span class="comment">		 * 组件去管理的，如果不想用这个组件，直接吧注册组件的那一步去掉就可以</span></span><br><span class="line"><span class="comment">		 * 注册<span class="doctag">@Import</span>等注解也是在这个方法中调用</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 因为currentRegistryProcessors是一个临时变量，所以需要清除掉</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		currentRegistryProcessors.clear();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.</span></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 2、调用实现Ordered接口的BeanDefinitionRegistryPostProcessors后置处理器</span></span><br><span class="line"><span class="comment">		 * 再次根据BeanDefinitionRegistryPostProcessor获取BeanName，看这个BeanName是否已经被执行过了，有没有实现Ordered接口</span></span><br><span class="line"><span class="comment">		 * 如果没有执行过，也实现了Ordered接口的话，把对象推送到currentRegistryProcessors，名称推送到processedBeans</span></span><br><span class="line"><span class="comment">		 * 如果没有实现Order接口的话，这里不把数据加到currentRegistryProcessors、processedBeans中，后续再做处理</span></span><br><span class="line"><span class="comment">		 * 这里才可以获取我们自定义的实现了BeanDefinitionRegistryPostProcessor的Bean</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line">		<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">			<span class="keyword">if</span> (!processedBeans.contains(ppName) &amp;&amp; beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;</span><br><span class="line">				currentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));</span><br><span class="line">				processedBeans.add(ppName);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 排序处理</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 合并processors</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		registryProcessors.addAll(currentRegistryProcessors);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 执行我们自定义的BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 清空临时变量</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		currentRegistryProcessors.clear();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.</span></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 3、调用其他所有的BeanDefinitionRegistryPostProcessors后置处理器</span></span><br><span class="line"><span class="comment">		 * 上面的代码是执行了实现了Ordered接口的BeanDefinitionRegistryPostProcessor，</span></span><br><span class="line"><span class="comment">		 * 下面的代码是执行没有实现Ordered接口的BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">boolean</span> reiterate = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">while</span> (reiterate) &#123;</span><br><span class="line">			reiterate = <span class="keyword">false</span>;</span><br><span class="line">			postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line">			<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">				<span class="keyword">if</span> (!processedBeans.contains(ppName)) &#123;</span><br><span class="line">					currentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));</span><br><span class="line">					processedBeans.add(ppName);</span><br><span class="line">					reiterate = <span class="keyword">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br><span class="line">			registryProcessors.addAll(currentRegistryProcessors);</span><br><span class="line">			<span class="comment">/** 第三次调用bean定义后置处理器 */</span></span><br><span class="line">			invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br><span class="line">			currentRegistryProcessors.clear();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Now, invoke the postProcessBeanFactory callback of all processors handled so far.</span></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 调用目前处理的所有后置处理器的回调函数</span></span><br><span class="line"><span class="comment">		 * registryProcessors装的是BeanDefinitionRegistryPostProcessor</span></span><br><span class="line"><span class="comment">		 * 上面的代码是执行子类独有的方法，这里需要再把父类的方法也执行一次</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		invokeBeanFactoryPostProcessors(registryProcessors, beanFactory);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * regularPostProcessors装的是BeanFactoryPostProcessor，执行BeanFactoryPostProcessor的方法</span></span><br><span class="line"><span class="comment">		 * 但是regularPostProcessors一般情况下，是不会有数据的，只有在外面手动添加BeanFactoryPostProcessor，才会有数据</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		invokeBeanFactoryPostProcessors(regularPostProcessors, beanFactory);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// Invoke factory processors registered with the context instance.</span></span><br><span class="line">		<span class="comment">/** 调用在上下文实例中注册的工厂处理器。 */</span></span><br><span class="line">		invokeBeanFactoryPostProcessors(beanFactoryPostProcessors, beanFactory);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Do not initialize FactoryBeans here: We need to leave all regular beans</span></span><br><span class="line">	<span class="comment">// uninitialized to let the bean factory post-processors apply to them!</span></span><br><span class="line">	<span class="comment">/** 这里不进行初始化FactoryBeans，而是让bean工厂后置处理器去初始化这些常规的bean */</span></span><br><span class="line">	String[] postProcessorNames =</span><br><span class="line">			beanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,Ordered, and the rest.</span></span><br><span class="line">	<span class="comment">/** 分离出 orderedPostProcessorNames 和nonOrderedPostProcessorNames */</span></span><br><span class="line">	List&lt;BeanFactoryPostProcessor&gt; priorityOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	List&lt;String&gt; orderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	List&lt;String&gt; nonOrderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 循环BeanNames</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 如果这个bean被执行过了，则跳过不执行</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">if</span> (processedBeans.contains(ppName)) &#123;</span><br><span class="line">			<span class="comment">// skip - already processed in first phase above</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 如果bean实现了PriorityOrdered接口，则加入到priorityOrderedPostProcessors</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;</span><br><span class="line">			priorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 如果bean实现了Ordered接口，则加入到orderedPostProcessorNames</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;</span><br><span class="line">			orderedPostProcessorNames.add(ppName);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 既没有实现PriorityOrdered接口，也没有实现Ordered接口，则加入到nonOrderedPostProcessorNames</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			nonOrderedPostProcessorNames.add(ppName);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 1、调用实现PriorityOrdered接口的bean工厂后置处理器</span></span><br><span class="line"><span class="comment">	 * 排序处理priorityOrderedPostProcessors,即实现了PriorityOrdered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	sortPostProcessors(priorityOrderedPostProcessors, beanFactory);</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行priorityOrderedPostProcessor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	invokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Next, invoke the BeanFactoryPostProcessors that implement Ordered.</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 2、调用实现Ordered接口实现的bean后置处理器</span></span><br><span class="line"><span class="comment">	 * 执行实现了Ordered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	List&lt;BeanFactoryPostProcessor&gt; orderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());</span><br><span class="line">	<span class="keyword">for</span> (String postProcessorName : orderedPostProcessorNames) &#123;</span><br><span class="line">		orderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));</span><br><span class="line">	&#125;</span><br><span class="line">	sortPostProcessors(orderedPostProcessors, beanFactory);</span><br><span class="line">	invokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Finally, invoke all other BeanFactoryPostProcessors.</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 3、调用其他所有的bean后置处理器</span></span><br><span class="line"><span class="comment">	 * 执行既没有实现PriorityOrdered接口也没有实现Ordered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	List&lt;BeanFactoryPostProcessor&gt; nonOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());</span><br><span class="line">	<span class="keyword">for</span> (String postProcessorName : nonOrderedPostProcessorNames) &#123;</span><br><span class="line">		nonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/** 这里会调用EventListenerMethodProcessor.postProcessBeanFactory(),注册事件监听器后置处理器 */</span></span><br><span class="line">	invokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Clear cached merged bean definitions since the post-processors might have</span></span><br><span class="line">	<span class="comment">// modified the original metadata, e.g. replacing placeholders in values...</span></span><br><span class="line">	beanFactory.clearMetadataCache();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先，判断了<code>beanFactory</code>是不是<code>BeanDefinitionRegistry</code>的实例,这里毋庸置疑肯定是的，然后会执行以下操作：</p>
<ol>
<li><p>定义了一个Set集合，用来装载<code>beanName</code>用的，后面会根据这个集合判断后置处理器是不是被执行过。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; processedBeans = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br></pre></td></tr></table></figure></li>
<li><p>定义了两个List，一个是<code>regularPostProcessors</code>，用来保存<code>BeanFactoryPostProcessor</code>；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;BeanFactoryPostProcessor&gt; regularPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>另一个是<code>registryProcessors</code>用来保存<code>BeanDefinitionRegistryPostProcessor</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;BeanDefinitionRegistryPostProcessor&gt; registryProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>BeanDefinitionRegistryPostProcessor</code>扩展了<code>BeanFactoryPostProcessor</code>。</p>
<p><code>BeanDefinitionRegistryPostProcessor</code>有两个方法，一个是自己的<code>postProcessBeanDefinitionRegistry</code>方法，另一个是父类的<code>postProcessBeanFactory</code>方法。</p>
</blockquote>
</li>
<li><p>循环传进来的<code>beanFactoryPostProcessors</code>，正常情况下<code>beanFactoryPostProcessors</code>肯定是为空的，没有数据的；因为<code>beanFactoryPostProcessors</code>是获得手动添加的，而不是获取spring自动扫描的。只有通过手动调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">annotationConfigApplicationContext.addBeanFactoryPostProcessor(args);</span><br></pre></td></tr></table></figure>

<p>才会不为空，获取到数据。</p>
<blockquote>
<p>如果<code>beanFactoryPostProcessors</code>不为空，依次遍历；判断是不是<code>BeanDefinitionRegistryPostProcessor</code>类型，</p>
<ol>
<li><p>如果不是则将遍历出的<code>postProcessor</code>加入到<code>regularPostProcessors</code>中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regularPostProcessors.add(postProcessor);</span><br></pre></td></tr></table></figure></li>
<li><p>不是，现将<code>postProcessor</code>强转为<code>BeanDefinitionRegistryPostProcessor</code>类型，然后注册为bean定义，最后加入到<code>registryProcessors</code>集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BeanDefinitionRegistryPostProcessor registryProcessor = (BeanDefinitionRegistryPostProcessor) postProcessor;</span><br><span class="line"><span class="comment">/** 注册bean定义后置处理器 */</span></span><br><span class="line">registryProcessor.postProcessBeanDefinitionRegistry(registry);</span><br><span class="line">registryProcessors.add(registryProcessor);</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
</li>
<li><p>定义了一个临时变量<code>currentRegistryProcessors</code>，用来保存<code>BeanDefinitionRegistryPostProcessor</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;BeanDefinitionRegistryPostProcessor&gt; currentRegistryProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure></li>
<li><p>拿到所有<code>BeanDefinitioinRegistryPostProcessor</code>类型的bean的名字，将其保存在<code>postProcessornames</code>数组中；然后遍历<code>postProcessorNames</code>数组。判断是不是实现了<code>PriorityOrderd</code>接口，如果实现了进行一下两个操作，否则跳过</p>
<ul>
<li>从bean工厂获取到<code>BeanDefinitionRegistryPostProcessor</code>实例，将该实例保存到<code>currentRegistryProcessors</code>。</li>
<li>将上述步骤获取到的实例名字保存到<code>processedBeans</code></li>
</ul>
<blockquote>
<p><strong><code>ConfigurationClassPostProcessor</code></strong> 是一个很重要的类，这个类实现了<code>BeanDefinitionRegistryPostProcessor</code>接口，而<code>BeanDefinitioinRegistryPostProcessor</code>又实现了<code>BeanFactoryPostProcessor</code>接口。</p>
<p>在<code>ConfigurationClassPostProcessor</code>中会执行扫描<code>@Bean</code>、<code>@Import</code>、<code>@ImportResource</code>等各种注解</p>
</blockquote>
</li>
<li><p>进行排序，<code>PriorityOrdered</code>是一个排序接口，如果实现了这个排序接口，就说明此后置处理器是有顺序的，需要进行排序操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br></pre></td></tr></table></figure></li>
<li><p>把<code>currentRegistryProcessors</code>合并到<code>registryProcessors</code>，这里合并的原因是因为spring只会执行<code>BeanDefinitionRegistryPostProcessor</code>独有的方法，而不会执行<code>BeanDefinitionRegistryPostProcessor</code>父类的方法，即<code>BeanFactoryProcessor</code>接口中的方法，所以需要把这些后置处理器放入到一个集合中，到后面统一执行<code>BeanFactoryProcessor</code>接口中的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registryProcessors.addAll(currentRegistryProcessors);</span><br></pre></td></tr></table></figure></li>
<li><p>这里可以是一个扩展点，在这里可以自定义我们的注册逻辑;同时这里也是第一次调用bean定义的后置处理器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br></pre></td></tr></table></figure>

<p>我们进入到这个方法内部看一看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">invokeBeanDefinitionRegistryPostProcessors</span><span class="params">(Collection&lt;? extends BeanDefinitionRegistryPostProcessor&gt; postProcessors, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (BeanDefinitionRegistryPostProcessor postProcessor : postProcessors) &#123;</span><br><span class="line">		<span class="comment">/** 这里调用ConfigutationClassPostProcessor处理beanDefinitionMap中的bean定义 */</span></span><br><span class="line">		postProcessor.postProcessBeanDefinitionRegistry(registry);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看出来，通过循环依次调用<code>ConfigurationClassPostProcessor</code>处理传进来的<code>registry</code>。不妨在进入到<code>postProcessBeanDefinitionRegistry()</code>方法中看一看。**注意：<code>BeanDefinitionRegistryPostProcessor</code>实现了<code>ConfigurationClassPostProcessor</code>**接口，所以我们这里应该找<code>ConfigurationClassPostProcessor</code>类中的<code>postProcessBeanDefinitionRegistry()</code>方法。如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> registryId = System.identityHashCode(registry);</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>.registriesPostProcessed.contains(registryId)) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">				<span class="string">&quot;postProcessBeanDefinitionRegistry already called on this post-processor against &quot;</span> + registry);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span>.factoriesPostProcessed.contains(registryId)) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">				<span class="string">&quot;postProcessBeanFactory already called on this post-processor against &quot;</span> + registry);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">this</span>.registriesPostProcessed.add(registryId);</span><br><span class="line">	<span class="comment">/** 这里会解析配置类的一些注解，例如<span class="doctag">@Configutation</span>、<span class="doctag">@Component</span>、<span class="doctag">@Import</span>等配置注解 */</span></span><br><span class="line">	processConfigBeanDefinitions(registry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里主要调用了<code>processConfigBeanDefinitions()</code>来解析配置类的一些注解，例如：<code>@Configuration</code>、<code>@Component</code>、<code>@Import</code>等配置注解。<a href="/archives/8d05e930">详细解析参考<code>invokeBeanDefinitionRegistryPostProcessors</code></a></p>
</li>
<li><p>清空了临时变量<code>currentRegistryProcessors</code>，因为后面还会使用这个集合变量，所以这里使用完毕之后需要清空，一遍后续使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">currentRegistryProcessors.clear();</span><br></pre></td></tr></table></figure></li>
<li><p>再次根据<code>BeanDefinitionRegistryPostProcessor</code>获取<code>BeanName</code>，然后进行循环，判断这个后置处理器有没有被执行过，如果没有被执行过，并且也实现了<code>Ordered</code>接口的话，就把此后置处理器保存在<code>currentRegistryProcessors</code>和<code>processedBeans</code>中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line"><span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!processedBeans.contains(ppName) &amp;&amp; beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;</span><br><span class="line">		currentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));</span><br><span class="line">		processedBeans.add(ppName);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里我们可以获得我们自己标注了<code>@Component</code>注解的后置处理器了，因为Spring已经完成了扫描，但是这里需要注意的是，由于<code>ConfigurationClassPostProcess</code>在上面已经被执行过了，所以虽然这里可以通过<code>getBeanNamesForType</code>获得，但是并不会加入到<code>currentRegistryProcessors</code>和<code>processedBeans</code>中。</p>
</blockquote>
</li>
<li><p>进行排序操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br></pre></td></tr></table></figure></li>
<li><p>合并<code>Processors</code>，合并理由同7</p>
</li>
<li><p>执行我们自定义的<code>BeanDefinitionRegistryPostProcessor</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br></pre></td></tr></table></figure></li>
<li><p>清空临时变量，同9一样</p>
</li>
<li><p>在上面的方法中，仅仅是执行了实现<code>Ordered</code>接口的<code>BeanDefinitionRegistryPostProcessor</code>，在这里是执行没有实现<code>Ordered</code>接口的<code>BeanDefinitionRegistryPostProcessor</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> reiterate = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">while</span> (reiterate) &#123;</span><br><span class="line">	reiterate = <span class="keyword">false</span>;</span><br><span class="line">	postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line">	<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!processedBeans.contains(ppName)) &#123;</span><br><span class="line">			currentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));</span><br><span class="line">			processedBeans.add(ppName);</span><br><span class="line">			reiterate = <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	sortPostProcessors(currentRegistryProcessors, beanFactory);</span><br><span class="line">	registryProcessors.addAll(currentRegistryProcessors);</span><br><span class="line">	<span class="comment">/** 第三次调用bean定义后置处理器 */</span></span><br><span class="line">	invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);</span><br><span class="line">	currentRegistryProcessors.clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>上面是调用子类独有的方法，这里需要把父类的方法在执行一遍。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invokeBeanFactoryPostProcessors(registryProcessors, beanFactory);</span><br></pre></td></tr></table></figure>

<p>这个方法的调用链很深，其实他最终会去执行<code>ConfigurationClassPostProcessor</code>类中的<code>postProcessBeanFactory()</code>方法。</p>
<p><img src="/archives/e74be873/image-20210828130627960.png" alt="ConfigurationClassPostProcessor#postPRocessBeanFactory"></p>
<blockquote>
<ul>
<li>在<code>postProcessBeanFactory()</code>方法中回调了<code>processConfigurationBeanDefinitions((BeanDefinitionRegistry) beanFactory)</code>方法来解析了<code>@Component</code>、<code>@Configuration</code>等注解</li>
<li>调用<code>enhanceConfigurationClasses(beanFactory)</code>来进行<code>CGLIB</code>代理，这里只会代理配置类为<code>Full</code>的类</li>
<li>然后向<code>beanFactory</code>中添加一个<code>ImportAwareBeanPostProcessor</code>后置处理器</li>
</ul>
</blockquote>
</li>
<li><p>再一次调用<code>invokeBeanFactoryPostProcessors</code>，执行<code>BeanFactoryPostProcessor</code>的方法，但是这里<code>regularPostProcessors</code>一般情况下是不会有数据的，只有在外部通过手动添加<code>BeanFactoryPostProcessor</code>，才会有数据。</p>
</li>
<li><p>查找实现了<code>BeanFactoryPostProcessor</code>的后置处理器，并且执行后置处理器方法。下面的逻辑和上面的步骤类似，这里就不在列举了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 这里不进行初始化FactoryBeans，而是让bean工厂后置处理器去初始化这些常规的bean */</span></span><br><span class="line">String[] postProcessorNames =</span><br><span class="line">		beanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,Ordered, and the rest.</span></span><br><span class="line"><span class="comment">/** 分离出 orderedPostProcessorNames 和nonOrderedPostProcessorNames */</span></span><br><span class="line">List&lt;BeanFactoryPostProcessor&gt; priorityOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">List&lt;String&gt; orderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">List&lt;String&gt; nonOrderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 循环BeanNames</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果这个bean被执行过了，则跳过不执行</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">if</span> (processedBeans.contains(ppName)) &#123;</span><br><span class="line">		<span class="comment">// skip - already processed in first phase above</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果bean实现了PriorityOrdered接口，则加入到priorityOrderedPostProcessors</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;</span><br><span class="line">		priorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果bean实现了Ordered接口，则加入到orderedPostProcessorNames</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;</span><br><span class="line">		orderedPostProcessorNames.add(ppName);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 既没有实现PriorityOrdered接口，也没有实现Ordered接口，则加入到nonOrderedPostProcessorNames</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		nonOrderedPostProcessorNames.add(ppName);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1、调用实现PriorityOrdered接口的bean工厂后置处理器</span></span><br><span class="line"><span class="comment"> * 排序处理priorityOrderedPostProcessors,即实现了PriorityOrdered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">sortPostProcessors(priorityOrderedPostProcessors, beanFactory);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 执行priorityOrderedPostProcessor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">invokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Next, invoke the BeanFactoryPostProcessors that implement Ordered.</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2、调用实现Ordered接口实现的bean后置处理器</span></span><br><span class="line"><span class="comment"> * 执行实现了Ordered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;BeanFactoryPostProcessor&gt; orderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());</span><br><span class="line"><span class="keyword">for</span> (String postProcessorName : orderedPostProcessorNames) &#123;</span><br><span class="line">	orderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));</span><br><span class="line">&#125;</span><br><span class="line">sortPostProcessors(orderedPostProcessors, beanFactory);</span><br><span class="line">invokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Finally, invoke all other BeanFactoryPostProcessors.</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3、调用其他所有的bean后置处理器</span></span><br><span class="line"><span class="comment"> * 执行既没有实现PriorityOrdered接口也没有实现Ordered接口的BeanFactoryPostProcessor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;BeanFactoryPostProcessor&gt; nonOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());</span><br><span class="line"><span class="keyword">for</span> (String postProcessorName : nonOrderedPostProcessorNames) &#123;</span><br><span class="line">	nonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** 这里会调用EventListenerMethodProcessor.postProcessBeanFactory(),注册事件监听器后置处理器 */</span></span><br><span class="line">invokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Clear cached merged bean definitions since the post-processors might have</span></span><br><span class="line"><span class="comment">// modified the original metadata, e.g. replacing placeholders in values...</span></span><br><span class="line">beanFactory.clearMetadataCache();</span><br></pre></td></tr></table></figure>

<p>最后附上<code>invokeBeanFactoryPostProcessor</code>方法中执行流程图，结合历程图更容易理解整个流程</p>
<p><img src="/archives/e74be873/IOC%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B-invokeBeanFactoryPostProcessor.png" alt="IOC加载流程-invokeBeanFactoryPostProcessor"></p>
</li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://www.lihuibin.top/archives/e74be873/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring%E6%BA%90%E7%A0%81/" rel="tag">Spring源码</a></li></ul>

    </footer>
  </div>

   
<div class="gitalk" id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css">


<script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'e247716e4bc0bde03887',
    clientSecret: '9c3304bbd2652553a5d9b31b843c82ee9e80f434',
    repo: 'blog.comments',
    owner: 'li-huibin',
    admin: ['li-huibin'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last'
  })

  gitalk.render('gitalk-container')
</script>

   
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021
        <i class="ri-heart-fill heart_icon"></i> Li HuiBin
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
        <li>
          <a href="https://beian.miit.gov.cn/" target="_black" rel="nofollow">晋ICP备2021014677号</a>
        </li>
        
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://v1.cnzz.com/z_stat.php?id=1280277223&amp;web_id=1280277223'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="不忘初心"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>